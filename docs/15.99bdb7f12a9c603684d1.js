(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"9N29":function(e,t,i){"use strict";i.r(t),i.d(t,"UserModule",function(){return xt});var r=i("ofXK"),o=i("tyNb"),n=i("UKuc"),s=i("dgEK");class a{}var c=i("Zdpv"),l=i("AytR"),u=i("fXoL"),d=i("x4NB"),p=i("0ADX"),b=i("jLSX"),m=i("8CEF"),h=i("7zfz"),g=i("6t4m"),f=i("OZ7R"),v=i("3Pt+"),S=i("7kUa"),F=i("CwEU"),R=i("eO1q"),y=i("arFO"),w=i("jIHw");const I=function(){return{maxWidth:"100%"}};function _(e,t){if(1&e){const e=u.Tb();u.Sb(0,"div",2),u.Sb(1,"div",3),u.Sb(2,"label",29),u.Jc(3,"Rol"),u.Rb(),u.Sb(4,"p-dropdown",30),u.Zb("ngModelChange",function(t){return u.Bc(e),u.dc().userFilter.role_id=t}),u.Rb(),u.Rb(),u.Sb(5,"div",3),u.Sb(6,"label",29),u.Jc(7,"Cargo"),u.Rb(),u.Sb(8,"p-dropdown",31),u.Zb("ngModelChange",function(t){return u.Bc(e),u.dc().userFilter.ocupation_id=t}),u.Rb(),u.Rb(),u.Rb()}if(2&e){const e=u.dc();u.Bb(4),u.Fc(u.oc(10,I)),u.kc("options",e.roles)("ngModel",e.userFilter.role_id)("showClear",!0),u.Bb(4),u.Fc(u.oc(11,I)),u.kc("options",e.occupations)("ngModel",e.userFilter.ocupation_id)("showClear",!0)}}const B=function(){return{minWidth:"100%"}};function k(e,t){if(1&e){const e=u.Tb();u.Sb(0,"div",2),u.Sb(1,"div",22),u.Sb(2,"label",29),u.Jc(3,"Rol"),u.Rb(),u.Sb(4,"p-dropdown",30),u.Zb("ngModelChange",function(t){return u.Bc(e),u.dc().userFilter.role_id=t}),u.Rb(),u.Rb(),u.Rb()}if(2&e){const e=u.dc();u.Bb(4),u.Fc(u.oc(5,B)),u.kc("options",e.roles)("ngModel",e.userFilter.role_id)("showClear",!0)}}let C=(()=>{class e{constructor(e){this.commonService=e,this.max_date=new Date,this.min_year=2021,this.max_year=(new Date).getFullYear(),this.userFilter=new a,this.filterEvent=new u.n,this.closeFilter=new u.n,this.userFilterInput=new a,this.occupations=[],this.roles=[],this.status=[]}ngOnInit(){this.commonService.getOcuppations().subscribe(e=>{200==e.code&&(this.occupations=e.list,this.occupations.unshift({id:void 0,name:"Todas"}))}),this.roles=[{name:"Todos",value:null},{name:"Usuario",value:1},{name:"Administrador",value:2}],this.status=[{name:"Todos",value:null},{name:"Habilitado",value:!0},{name:"Inhabilitado",value:!1}],this.loadFilters()}loadFilters(){this.userFilter=Object.assign({},this.userFilterInput),this.userFilter.date_from&&(this.date_from=new Date(`${this.userFilter.date_from} 00:00:00`)),this.userFilter.date_to&&(this.date_to=new Date(`${this.userFilter.date_to} 00:00:00`))}search(){this.userFilter.role_id==n.a.USER_ADMIN&&(this.userFilter.ocupation_id=void 0),this.userFilter.date_from=this.date_from?this.date_from.toISOString().split("T")[0]:"",this.userFilter.date_to=this.date_to?this.date_to.toISOString().split("T")[0]:"",localStorage.setItem("userFilter",JSON.stringify(this.userFilter)),this.filterEvent.emit(this.userFilter)}closeDialog(){this.closeFilter.emit(!0)}clear(){this.userFilter=new a,this.date_from=void 0,this.date_to=void 0,this.userFilter.page=this.userFilterInput.page,this.userFilter.size=this.userFilterInput.size}}return e.\u0275fac=function(t){return new(t||e)(u.Mb(f.a))},e.\u0275cmp=u.Gb({type:e,selectors:[["app-user-filter"]],inputs:{userFilterInput:"userFilterInput"},outputs:{filterEvent:"filterEvent",closeFilter:"closeFilter"},decls:61,vars:34,consts:[[1,"p-m-4",3,"ngSubmit"],[1,"myFormFilter"],[1,"p-fluid","p-formgrid","p-grid"],[1,"p-field","p-col-6"],["for","first_name"],["placeholder","Primer nombre","name","user.first_name","autocomplete","off","id","first_name","type","text","pInputText","",3,"ngModel","ngModelChange"],["for","second_name"],["placeholder","Segundo nombre","name","second_name","autocomplete","off","id","second_name","type","text","pInputText","",3,"ngModel","ngModelChange"],["for","first_surname"],["placeholder","Primer apellido","name","first_surname","autocomplete","off","id","first_surname","type","text","pInputText","",3,"ngModel","ngModelChange"],["for","second_surname"],["placeholder","Segundo apellido","name","second_surname","autocomplete","off","id","second_surname","type","text","pInputText","",3,"ngModel","ngModelChange"],["for","name"],["placeholder","Direcci\xf3n email","name","email","autocomplete","off","id","name","type","email","pInputText","",3,"ngModel","ngModelChange"],["name","dni","mask","99999999","placeholder","N\xfamero dni",3,"ngModel","unmask","autoClear","ngModelChange"],["for","dateFrom"],["dateFormat","dd/mm/yy","name","dateFrom","id","dateFrom","inputId","navigators",3,"showIcon","appendTo","showButtonBar","placeholder","ngModel","monthNavigator","yearNavigator","yearRange","maxDate","ngModelChange"],["date_From",""],["for","dateTo"],["dateFormat","dd/mm/yy","name","dateTo","id","dateTo","inputId","navigators",3,"showIcon","appendTo","showButtonBar","placeholder","ngModel","monthNavigator","yearNavigator","yearRange","maxDate","ngModelChange"],["date_To",""],["class","p-fluid p-formgrid p-grid",4,"ngIf"],[1,"p-field","p-col"],["for","status"],["placeholder","\xa0","name","status","optionValue","value","optionLabel","name",3,"options","ngModel","showClear","ngModelChange"],["for",""],["pButton","","pRipple","","type","submit","label","Buscar","icon","pi pi-search",1,"myBtnInput","p-button-raised","p-button-primary"],["pButton","","pRipple","","type","button","label","Restablecer","icon","pi pi-replay",1,"myBtnInput","p-button-raised","p-button-secondary",3,"click"],["pButton","","pRipple","","type","button","label","Cerrar","icon","pi pi-times",1,"myBtnInput","p-button-raised","p-button-danger",3,"click"],["for","type"],["placeholder","\xa0","name","role_id","optionValue","value","optionLabel","name",3,"options","ngModel","showClear","ngModelChange"],["placeholder","\xa0","name","ocupation_id","optionValue","id","optionLabel","name",3,"options","ngModel","showClear","ngModelChange"]],template:function(e,t){if(1&e&&(u.Sb(0,"form",0),u.Zb("ngSubmit",function(){return t.search()}),u.Sb(1,"h1"),u.Jc(2,"Filtros"),u.Rb(),u.Sb(3,"div",1),u.Sb(4,"div",2),u.Sb(5,"div",3),u.Sb(6,"label",4),u.Jc(7,"Nombres"),u.Rb(),u.Sb(8,"input",5),u.Zb("ngModelChange",function(e){return t.userFilter.first_name=e}),u.Rb(),u.Rb(),u.Sb(9,"div",3),u.Sb(10,"label",6),u.Jc(11,"\xa0"),u.Rb(),u.Sb(12,"input",7),u.Zb("ngModelChange",function(e){return t.userFilter.second_name=e}),u.Rb(),u.Rb(),u.Rb(),u.Sb(13,"div",2),u.Sb(14,"div",3),u.Sb(15,"label",8),u.Jc(16,"Apellidos"),u.Rb(),u.Sb(17,"input",9),u.Zb("ngModelChange",function(e){return t.userFilter.first_surname=e}),u.Rb(),u.Rb(),u.Sb(18,"div",3),u.Sb(19,"label",10),u.Jc(20,"\xa0"),u.Rb(),u.Sb(21,"input",11),u.Zb("ngModelChange",function(e){return t.userFilter.second_surname=e}),u.Rb(),u.Rb(),u.Rb(),u.Sb(22,"div",2),u.Sb(23,"div",3),u.Sb(24,"label",12),u.Jc(25,"Email"),u.Rb(),u.Sb(26,"input",13),u.Zb("ngModelChange",function(e){return t.userFilter.email=e}),u.Rb(),u.Rb(),u.Sb(27,"div",3),u.Sb(28,"label",12),u.Jc(29,"Dni"),u.Rb(),u.Sb(30,"p-inputMask",14),u.Zb("ngModelChange",function(e){return t.userFilter.dni=e}),u.Rb(),u.Rb(),u.Rb(),u.Sb(31,"div",2),u.Sb(32,"div",3),u.Sb(33,"label",15),u.Jc(34,"Fecha de uni\xf3n desde"),u.Rb(),u.Sb(35,"p-calendar",16,17),u.Zb("ngModelChange",function(e){return t.date_from=e}),u.Rb(),u.Rb(),u.Sb(37,"div",3),u.Sb(38,"label",18),u.Jc(39,"Fecha de uni\xf3n hasta"),u.Rb(),u.Sb(40,"p-calendar",19,20),u.Zb("ngModelChange",function(e){return t.date_to=e}),u.Rb(),u.Rb(),u.Rb(),u.Hc(42,_,9,12,"div",21),u.Hc(43,k,5,6,"div",21),u.Sb(44,"div",2),u.Sb(45,"div",22),u.Sb(46,"label",23),u.Jc(47,"Estado"),u.Rb(),u.Sb(48,"p-dropdown",24),u.Zb("ngModelChange",function(e){return t.userFilter.enabled=e}),u.Rb(),u.Rb(),u.Rb(),u.Sb(49,"div",2),u.Sb(50,"div",22),u.Sb(51,"label",25),u.Jc(52," \xa0"),u.Rb(),u.Nb(53,"button",26),u.Rb(),u.Rb(),u.Sb(54,"div",2),u.Sb(55,"div",3),u.Sb(56,"button",27),u.Zb("click",function(){return t.clear()}),u.Rb(),u.Rb(),u.Sb(57,"div",3),u.Sb(58,"button",28),u.Zb("click",function(){return t.closeDialog()}),u.Rb(),u.Rb(),u.Rb(),u.Nb(59,"br"),u.Nb(60,"br"),u.Rb(),u.Rb()),2&e){const e=u.yc(36),i=u.yc(41);u.Bb(8),u.kc("ngModel",t.userFilter.first_name),u.Bb(4),u.kc("ngModel",t.userFilter.second_name),u.Bb(5),u.kc("ngModel",t.userFilter.first_surname),u.Bb(4),u.kc("ngModel",t.userFilter.second_surname),u.Bb(5),u.kc("ngModel",t.userFilter.email),u.Bb(4),u.kc("ngModel",t.userFilter.dni)("unmask",!0)("autoClear",!1),u.Bb(5),u.mc("placeholder","01/01/",t.max_year,""),u.kc("showIcon",!0)("appendTo",e)("showButtonBar",!0)("ngModel",t.date_from)("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.min_year+":"+t.max_year)("maxDate",t.max_date),u.Bb(5),u.mc("placeholder","01/01/",t.max_year,""),u.kc("showIcon",!0)("appendTo",i)("showButtonBar",!0)("ngModel",t.date_to)("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.min_year+":"+t.max_year)("maxDate",t.max_date),u.Bb(2),u.kc("ngIf",2!=t.userFilter.role_id),u.Bb(1),u.kc("ngIf",2==t.userFilter.role_id),u.Bb(5),u.Fc(u.oc(33,B)),u.kc("options",t.status)("ngModel",t.userFilter.enabled)("showClear",!0)}},directives:[v.q,v.j,v.k,v.b,S.a,v.i,v.l,F.a,R.a,r.l,y.a,w.b],styles:[".myFormFilter[_ngcontent-%COMP%]{height:88vh;padding-right:10px;overflow-y:scroll!important;overflow-x:hidden!important}"]}),e})();var M=i("Wq6t");const x=["p"];function N(e,t){if(1&e){const e=u.Tb();u.Sb(0,"app-user-filter",13),u.Zb("filterEvent",function(t){return u.Bc(e),u.dc().filterEvent(t)})("closeFilter",function(){return u.Bc(e),u.dc().closeFilterWindow()}),u.Rb()}if(2&e){const e=u.dc();u.kc("userFilterInput",e.userFilter)}}function J(e,t){1&e&&u.Nb(0,"i",33)}function D(e,t){1&e&&u.Nb(0,"i",34)}function P(e,t){1&e&&u.Nb(0,"i",35)}function H(e,t){1&e&&u.Nb(0,"i",35)}function T(e,t){1&e&&u.Nb(0,"i",36)}function E(e,t){1&e&&u.Nb(0,"i",36)}function O(e,t){if(1&e&&(u.Sb(0,"div",28),u.Sb(1,"div"),u.Hc(2,J,1,0,"i",29),u.Hc(3,D,1,0,"i",30),u.Hc(4,P,1,0,"i",31),u.Hc(5,H,1,0,"i",31),u.Hc(6,T,1,0,"i",32),u.Hc(7,E,1,0,"i",32),u.Jc(8),u.Rb(),u.Rb()),2&e){const e=u.dc(3);u.Bb(2),u.kc("ngIf",0==(null==e.userFilter.sort?null:e.userFilter.sort.sortId)),u.Bb(1),u.kc("ngIf",1==(null==e.userFilter.sort?null:e.userFilter.sort.sortId)),u.Bb(1),u.kc("ngIf",2==(null==e.userFilter.sort?null:e.userFilter.sort.sortId)),u.Bb(1),u.kc("ngIf",3==(null==e.userFilter.sort?null:e.userFilter.sort.sortId)),u.Bb(1),u.kc("ngIf",4==(null==e.userFilter.sort?null:e.userFilter.sort.sortId)),u.Bb(1),u.kc("ngIf",5==(null==e.userFilter.sort?null:e.userFilter.sort.sortId)),u.Bb(1),u.Lc(" ",null==e.userFilter.sort?null:e.userFilter.sort.sortField," ")}}function A(e,t){if(1&e&&u.Hc(0,O,9,7,"div",27),2&e){const e=u.dc(2);u.kc("ngIf",null==e.userFilter.sort?null:e.userFilter.sort.sortField)}}function Z(e,t){1&e&&u.Nb(0,"i",33)}function L(e,t){1&e&&u.Nb(0,"i",34)}function U(e,t){1&e&&u.Nb(0,"i",35)}function z(e,t){1&e&&u.Nb(0,"i",35)}function j(e,t){1&e&&u.Nb(0,"i",36)}function $(e,t){1&e&&u.Nb(0,"i",36)}function V(e,t){if(1&e&&(u.Sb(0,"div",37),u.Sb(1,"div"),u.Hc(2,Z,1,0,"i",29),u.Hc(3,L,1,0,"i",30),u.Hc(4,U,1,0,"i",31),u.Hc(5,z,1,0,"i",31),u.Hc(6,j,1,0,"i",32),u.Hc(7,$,1,0,"i",32),u.Jc(8),u.Rb(),u.Rb()),2&e){const e=t.$implicit;u.Bb(2),u.kc("ngIf",0==e.sortId),u.Bb(1),u.kc("ngIf",1==e.sortId),u.Bb(1),u.kc("ngIf",2==e.sortId),u.Bb(1),u.kc("ngIf",3==e.sortId),u.Bb(1),u.kc("ngIf",4==e.sortId),u.Bb(1),u.kc("ngIf",5==e.sortId),u.Bb(1),u.Lc(" ",e.sortField," ")}}function q(e,t){if(1&e){const e=u.Tb();u.Sb(0,"div",14),u.Nb(1,"div",15),u.Nb(2,"p-dataViewLayoutOptions",null,16),u.Rb(),u.Sb(4,"div",17),u.Sb(5,"p-splitButton",18),u.Zb("onClick",function(){return u.Bc(e),u.dc().show()}),u.Rb(),u.Sb(6,"span",19),u.Nb(7,"i",20),u.Sb(8,"input",21),u.Zb("ngModelChange",function(t){return u.Bc(e),u.dc().userFilter.dni=t})("ngModelChange",function(t){return u.Bc(e),u.dc().searchEvent(t)}),u.Rb(),u.Rb(),u.Sb(9,"span",22),u.Sb(10,"p-dropdown",23),u.Zb("ngModelChange",function(t){return u.Bc(e),u.dc().userFilter.sort=t})("onChange",function(){return u.Bc(e),u.dc().sortEvent()}),u.Hc(11,A,1,1,"ng-template",24),u.Hc(12,V,9,7,"ng-template",25),u.Rb(),u.Sb(13,"label",26),u.Jc(14,"Ordenar por"),u.Rb(),u.Rb(),u.Rb()}if(2&e){const e=u.dc();u.Bb(5),u.kc("model",e.items),u.Bb(3),u.kc("ngModel",e.userFilter.dni),u.Bb(2),u.kc("options",e.sortList)("ngModel",e.userFilter.sort)("showClear",!0)("autoDisplayFirst",!1)}}function K(e,t){if(1&e){const e=u.Tb();u.Sb(0,"img",56),u.Zb("click",function(){u.Bc(e);const t=u.dc().$implicit;return u.dc().showDetail(t)}),u.Rb()}if(2&e){const e=u.dc().$implicit;u.kc("src",null==e?null:e.photo_path,u.Dc)("alt",e.name)}}function G(e,t){if(1&e){const e=u.Tb();u.cc(),u.Sb(0,"svg",57),u.Zb("click",function(){u.Bc(e);const t=u.dc().$implicit;return u.dc().showDetail(t)}),u.Nb(1,"defs"),u.Sb(2,"g",58),u.Nb(3,"path",59),u.Rb(),u.Rb()}}function W(e,t){if(1&e&&(u.Sb(0,"span"),u.Jc(1),u.Rb()),2&e){const e=u.dc().$implicit;u.Bb(1),u.Kc(null==e.occupation?null:e.occupation.name)}}function Y(e,t){1&e&&(u.Sb(0,"span",60),u.Jc(1," Administrador "),u.Rb())}function Q(e,t){if(1&e){const e=u.Tb();u.Sb(0,"div",38),u.Sb(1,"div",39),u.Hc(2,K,1,2,"img",40),u.Hc(3,G,4,0,"svg",41),u.Sb(4,"div",42),u.Sb(5,"div",43),u.Jc(6),u.ec(7,"titlecase"),u.ec(8,"titlecase"),u.ec(9,"titlecase"),u.ec(10,"titlecase"),u.Rb(),u.Sb(11,"div",44),u.Nb(12,"i",45),u.Jc(13),u.Rb(),u.Sb(14,"div",46),u.Nb(15,"i",47),u.Jc(16),u.Rb(),u.Sb(17,"span",48),u.Jc(18),u.ec(19,"date"),u.ec(20,"titlecase"),u.ec(21,"date"),u.ec(22,"date"),u.ec(23,"titlecase"),u.ec(24,"date"),u.Rb(),u.Rb(),u.Sb(25,"div",49),u.Sb(26,"div",50),u.Nb(27,"i"),u.Hc(28,W,2,1,"span",51),u.Hc(29,Y,2,0,"span",52),u.Rb(),u.Sb(30,"div",53),u.Sb(31,"span"),u.Jc(32),u.Rb(),u.Rb(),u.Nb(33,"br"),u.Sb(34,"div",54),u.Sb(35,"button",55),u.Zb("click",function(){u.Bc(e);const i=t.$implicit;return u.dc().showDetail(i)}),u.Rb(),u.Rb(),u.Rb(),u.Rb(),u.Rb()}if(2&e){const e=t.$implicit;u.Bb(2),u.kc("ngIf",null==e?null:e.photo_path),u.Bb(1),u.kc("ngIf",!e.photo_path),u.Bb(3),u.Oc(" ",u.fc(7,19,e.second_name?e.first_name:e.first_name+",")," ",u.fc(8,21,e.second_name?e.second_name+",":"")," ",u.fc(9,23,e.first_surname)," ",u.fc(10,25,e.second_surname)," "),u.Bb(7),u.Kc(e.email),u.Bb(3),u.Kc(e.dni),u.Bb(2),u.Oc(" Se uni\xf3 el ",u.gc(19,27,e.createdAt,"d")," de ",u.fc(20,30,u.gc(21,32,e.createdAt,"MMMM"))," del ",u.gc(22,35,e.createdAt,"y"),", ",u.fc(23,38,u.gc(24,40,e.createdAt,"hh:mm a")),""),u.Bb(9),u.Db("pi pi-"+(2==e.role_id?"shield":"briefcase")+" product-category-icon"),u.Bb(1),u.kc("ngIf",null==e.occupation?null:e.occupation.name),u.Bb(1),u.kc("ngIf",2==e.role_id),u.Bb(2),u.Db("status "+(e.enabled?"enabled":"disabled")),u.Bb(1),u.Kc(e.enabled?"Habilidato":"Inhabilitado")}}function X(e,t){if(1&e&&(u.Sb(0,"span",72),u.Jc(1),u.Rb()),2&e){const e=u.dc().$implicit;u.Bb(1),u.Kc(null==e.occupation?null:e.occupation.name)}}function ee(e,t){1&e&&(u.Sb(0,"span",73),u.Jc(1," Administrador "),u.Rb())}function te(e,t){if(1&e){const e=u.Tb();u.Sb(0,"img",74),u.Zb("click",function(){u.Bc(e);const t=u.dc().$implicit;return u.dc().showDetail(t)}),u.Rb()}if(2&e){const e=u.dc().$implicit;u.kc("src",null==e?null:e.photo_path,u.Dc)("alt",e.name)}}function ie(e,t){if(1&e){const e=u.Tb();u.cc(),u.Sb(0,"svg",75),u.Zb("click",function(){u.Bc(e);const t=u.dc().$implicit;return u.dc().showDetail(t)}),u.Nb(1,"defs"),u.Sb(2,"g",58),u.Nb(3,"path",59),u.Rb(),u.Rb()}}function re(e,t){if(1&e){const e=u.Tb();u.Sb(0,"div",61),u.Sb(1,"div",62),u.Sb(2,"div",63),u.Sb(3,"div"),u.Nb(4,"i"),u.Hc(5,X,2,1,"span",64),u.Hc(6,ee,2,0,"span",65),u.Rb(),u.Sb(7,"span"),u.Jc(8),u.Rb(),u.Rb(),u.Sb(9,"div",66),u.Hc(10,te,1,2,"img",67),u.Hc(11,ie,4,0,"svg",68),u.Sb(12,"div",69),u.Jc(13),u.ec(14,"titlecase"),u.ec(15,"titlecase"),u.Rb(),u.Sb(16,"div",44),u.Nb(17,"i",45),u.Jc(18),u.Rb(),u.Sb(19,"div",44),u.Nb(20,"i",47),u.Jc(21),u.Rb(),u.Rb(),u.Sb(22,"div",70),u.Sb(23,"span",48),u.Jc(24),u.ec(25,"date"),u.ec(26,"titlecase"),u.ec(27,"date"),u.ec(28,"date"),u.Rb(),u.Sb(29,"button",71),u.Zb("click",function(){u.Bc(e);const i=t.$implicit;return u.dc().showDetail(i)}),u.Rb(),u.Rb(),u.Rb(),u.Rb()}if(2&e){const e=t.$implicit;u.Bb(4),u.Db("pi pi-"+(2==e.role_id?"shield":"briefcase")+" product-category-icon"),u.Bb(1),u.kc("ngIf",null==e.occupation?null:e.occupation.name),u.Bb(1),u.kc("ngIf",2==e.role_id),u.Bb(1),u.Db("status "+(e.enabled?"enabled":"disabled")),u.Bb(1),u.Kc(e.enabled?"Habilidato":"Inhabilitado"),u.Bb(2),u.kc("ngIf",null==e?null:e.photo_path),u.Bb(1),u.kc("ngIf",!e.photo_path),u.Bb(2),u.Mc("",u.fc(14,16,null==e?null:e.first_name)," ",u.fc(15,18,null==e?null:e.first_surname),""),u.Bb(5),u.Kc(e.email),u.Bb(3),u.Kc(e.dni),u.Bb(3),u.Nc(" Se uni\xf3 el ",u.gc(25,20,e.createdAt,"d")," de ",u.fc(26,23,u.gc(27,25,e.createdAt,"MMMM"))," del ",u.gc(28,28,e.createdAt,"y")," ")}}const oe=function(){return["Usuarios","Administrar"]},ne=function(){return{width:"34em"}},se=function(){return[6,9,12,15,18]};let ae=(()=>{class e{constructor(e,t){this.userService=e,this.router=t,this.visibleSidebar=!1,this.userFilter=new a,this.usersFound=!0,this.usersFilterResult=new c.a,this.sortList=[],this.lastDni="",this.timer=null}ngOnInit(){this.urlBase=l.a.urlBase,this.userFilter=JSON.parse(localStorage.getItem("userFilter"))?JSON.parse(localStorage.getItem("userFilter")):new a,this.userFilter.size=this.userFilter.size?this.userFilter.size:6,this.setFilterItems(),this.setSortList(),this.submit(this.userFilter.page?this.userFilter.page:0)}setFilterItems(){this.items=[{label:"Limpiar ",icon:"pi pi-filter-slash",command:()=>{var e;localStorage.removeItem("userFilter"),this.userFilter=new a,null===(e=this.paginator)||void 0===e||e.changePage(0)}},{separator:!0},{label:"Refrescar",icon:"pi pi-refresh",command:()=>{var e;null===(e=this.paginator)||void 0===e||e.changePage(0)}}]}setSortList(){this.sortList=[{sortField:"Nombres",sortId:0,inactive:!1},{sortField:"Cargo",sortId:2,inactive:!1},{sortField:"Estado",sortId:3,inactive:!1},{sortField:"Dni",sortId:1,inactive:!1},{sortField:"M\xe1s recientes",sortId:4,inactive:!1},{sortField:"M\xe1s antiguos",sortId:5,inactive:!1}]}submit(e){this.userFilter.page=e,this.userService.getUsersFilter(this.userFilter).subscribe(e=>{200==e.code?(this.usersFound=!0,this.usersFilterResult=e.object):404==e.code&&(this.usersFound=!1,this.usersFilterResult.list=[]),localStorage.setItem("userFilter",JSON.stringify(this.userFilter))},e=>{})}paginate(e){this.userFilter.size=e.rows,this.submit(e.page)}ngAfterViewInit(){var e;0!==(null===(e=this.userFilter)||void 0===e?void 0:e.page)&&setTimeout(()=>{var e;null===(e=this.paginator)||void 0===e||e.changePage(this.userFilter.page?this.userFilter.page:0)},300)}filterEvent(e){e&&(this.userFilter=Object.assign({},e),this.submit(0)),this.closeFilterWindow()}searchEvent(e){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.search(e)},700)}search(e){e!==this.lastDni&&this.submit(0),this.lastDni=e}show(){this.visibleSidebar=!0}closeFilterWindow(){this.visibleSidebar=!1}sortEvent(){var e;null===(e=this.paginator)||void 0===e||e.changePage(0)}showDetail(e){this.router.navigate(["users","detail",e.id])}}return e.\u0275fac=function(t){return new(t||e)(u.Mb(d.a),u.Mb(o.b))},e.\u0275cmp=u.Gb({type:e,selectors:[["app-index"]],viewQuery:function(e,t){if(1&e&&u.Pc(x,1),2&e){let e;u.xc(e=u.ac())&&(t.paginator=e.first)}},decls:14,vars:23,consts:[[3,"options","icon"],[1,"myFormFilter",3,"blockScroll","visible","baseZIndex","visibleChange"],[3,"userFilterInput","filterEvent","closeFilter",4,"ngIf"],[1,"p-mt-2"],[1,"card","myCard","myBg"],[1,"p-text-left","myTitle",2,"margin-bottom","0"],["filterBy","name","layout","grid","emptyMessage","No se encontraron registros",3,"value","rows"],["dv",""],["pTemplate","header"],["pTemplate","listItem"],["pTemplate","gridItem"],[3,"rows","showCurrentPageReport","showJumpToPageDropdown","currentPageReportTemplate","totalRecords","pageLinkSize","rowsPerPageOptions","onPageChange"],["p",""],[3,"userFilterInput","filterEvent","closeFilter"],[1,"p-d-flex","p-flex-column","p-flex-md-row","p-jc-md-between","p-mb-2"],[1,""],["o",""],[1,"p-d-flex","p-flex-column","p-flex-md-row","p-jc-md-between"],["label","Aplicar Filtros","icon","pi pi-filter","styleClass","p-button-primary p-mb-1",3,"model","onClick"],[1,"p-input-icon-left","p-mb-md-0","p-mb-2"],[1,"pi","pi-search"],["type","search","pattern","\\d*","pInputText","","autocomplete","off","placeholder","Buscar por dni","name","_dni",3,"ngModel","ngModelChange"],[1,"p-float-label"],["optionLabel","sortField","optionDisabled","inactive",3,"options","ngModel","showClear","autoDisplayFirst","ngModelChange","onChange"],["pTemplate","selectedItem"],["pTemplate","item"],["for","dropdown"],["class","country-item country-item-value",4,"ngIf"],[1,"country-item","country-item-value"],["class","product-category-icon pi pi-sort-alpha-up",4,"ngIf"],["class","product-category-icon pi pi-sort-numeric-up",4,"ngIf"],["class","product-category-icon pi pi-sort-amount-up",4,"ngIf"],["class","product-category-icon pi pi-clock",4,"ngIf"],[1,"product-category-icon","pi","pi-sort-alpha-up"],[1,"product-category-icon","pi","pi-sort-numeric-up"],[1,"product-category-icon","pi","pi-sort-amount-up"],[1,"product-category-icon","pi","pi-clock"],[1,"country-item"],[1,"p-col-12"],[1,"product-list-item"],["style","width: 8.5rem; margin-right: 1rem; cursor: pointer;","class","myMiniAvatar",3,"src","alt","click",4,"ngIf"],["class","myAvatarSvg","style","width: 8.5rem; margin-right: 1rem; cursor: pointer;","viewBox","0 0 32 32","xmlns","http://www.w3.org/2000/svg",3,"click",4,"ngIf"],[1,"product-list-detail"],[1,"product-name",2,"margin-bottom","5px"],[1,"product-description",2,"margin-bottom","5px"],[1,"pi","pi-envelope","product-category-icon"],[1,"product-description",2,"margin-bottom","10px"],[1,"pi","pi-id-card","product-category-icon"],[1,"product-price"],[1,"product-list-action"],[1,"p-mb-3"],[4,"ngIf"],["class","status warn",4,"ngIf"],[1,"p-text-right"],[1,"p-d-flex"],["pButton","","pRipple","","type","button","icon","pi pi-eye",1,"p-ml-auto","p-button-secondary",3,"click"],[1,"myMiniAvatar",2,"width","8.5rem","margin-right","1rem","cursor","pointer",3,"src","alt","click"],["viewBox","0 0 32 32","xmlns","http://www.w3.org/2000/svg",1,"myAvatarSvg",2,"width","8.5rem","margin-right","1rem","cursor","pointer",3,"click"],["id","User"],["d","M28,22.5c0,3.645-5.2715,6.5-12,6.5S4,26.145,4,22.5,9.2715,16,16,16,28,18.855,28,22.5ZM16,14a5.5,5.5,0,1,0-5.5-5.5A5.5066,5.5066,0,0,0,16,14Z",1,"cls-1"],[1,"status","warn"],[1,"p-col-12","p-md-4"],[1,"product-grid-item","card","myCard"],[1,"product-grid-item-top",2,"margin-bottom","1rem"],["class","product-category",4,"ngIf"],["class","product-category status warn",4,"ngIf"],[1,"product-grid-item-content"],["style","width: 50%; margin: 0; cursor: pointer;","class","myMiniAvatar",3,"src","alt","click",4,"ngIf"],["class","myAvatarSvg","style","width: 50%; cursor: pointer;","viewBox","0 0 32 32","xmlns","http://www.w3.org/2000/svg",3,"click",4,"ngIf"],[1,"product-name"],[1,"product-grid-item-bottom"],["pButton","","pRipple","","type","button","icon","pi pi-eye",1,"p-button-secondary",3,"click"],[1,"product-category"],[1,"product-category","status","warn"],[1,"myMiniAvatar",2,"width","50%","margin","0","cursor","pointer",3,"src","alt","click"],["viewBox","0 0 32 32","xmlns","http://www.w3.org/2000/svg",1,"myAvatarSvg",2,"width","50%","cursor","pointer",3,"click"]],template:function(e,t){1&e&&(u.Nb(0,"app-mini-menu",0),u.Sb(1,"p-sidebar",1),u.Zb("visibleChange",function(e){return t.visibleSidebar=e}),u.Hc(2,N,1,1,"app-user-filter",2),u.Rb(),u.Sb(3,"div",3),u.Sb(4,"div",4),u.Sb(5,"h2",5),u.Jc(6," Administrar usuarios "),u.Rb(),u.Sb(7,"p-dataView",6,7),u.Hc(9,q,15,6,"ng-template",8),u.Hc(10,Q,36,43,"ng-template",9),u.Hc(11,re,30,31,"ng-template",10),u.Rb(),u.Sb(12,"p-paginator",11,12),u.Zb("onPageChange",function(e){return t.paginate(e)}),u.Rb(),u.Rb(),u.Rb()),2&e&&(u.kc("options",u.oc(20,oe))("icon","home"),u.Bb(1),u.Fc(u.oc(21,ne)),u.kc("blockScroll",!0)("visible",t.visibleSidebar)("baseZIndex",1e4),u.Bb(1),u.kc("ngIf",t.visibleSidebar),u.Bb(5),u.kc("value",t.usersFilterResult.list)("rows",9),u.Bb(5),u.Db(t.usersFound?"":"ocult"),u.nc("currentPageReportTemplate","P\xe1gina ",t.usersFilterResult.currentPage+1," de ",t.usersFilterResult.totalPages,""),u.kc("rows",t.userFilter.size)("showCurrentPageReport",!0)("showJumpToPageDropdown",!1)("totalRecords",t.usersFilterResult.totalItems)("pageLinkSize",3)("rowsPerPageOptions",u.oc(22,se)))},directives:[p.a,b.a,r.l,m.a,h.i,g.a,C,m.b,M.a,v.b,v.n,S.a,v.i,v.l,y.a,w.b],pipes:[r.t,r.e],styles:["[_nghost-%COMP%]     .p-dropdown{width:14rem;font-weight:400}[_nghost-%COMP%]     .product-name{font-size:1.5rem;font-weight:700}[_nghost-%COMP%]     .product-description{margin:0 0 1rem}[_nghost-%COMP%]     .product-category-icon{vertical-align:middle;margin-right:.5rem;color:var(--primary-color)}[_nghost-%COMP%]     .product-category{font-weight:600;vertical-align:middle}[_nghost-%COMP%]     .product-list-item{display:flex;align-items:center;padding:1rem;width:100%}[_nghost-%COMP%]     .product-list-item img{width:130px;margin-right:2rem}[_nghost-%COMP%]     .product-list-item .product-list-detail{flex:1 1 0}[_nghost-%COMP%]     .product-list-item .p-rating{margin:0 0 .5rem}[_nghost-%COMP%]     .product-list-item .product-price{font-size:1.2rem;font-weight:500;margin-bottom:.5rem;align-self:flex-end;color:var(--primary-color)}[_nghost-%COMP%]     .product-list-item .product-list-action{display:flex;flex-direction:column}[_nghost-%COMP%]     .product-list-item .p-button{margin-bottom:.5rem}[_nghost-%COMP%]     .product-grid-item{margin:.5em;border:1px solid #dee2e6}[_nghost-%COMP%]     .product-grid-item .product-grid-item-bottom, [_nghost-%COMP%]     .product-grid-item .product-grid-item-top{display:flex;align-items:center;justify-content:space-between}[_nghost-%COMP%]     .product-grid-item img{width:40%;margin:.5rem 0}[_nghost-%COMP%]     .product-grid-item .product-grid-item-content{text-align:center}[_nghost-%COMP%]     .product-grid-item .product-price{font-size:1.05rem;font-weight:500;color:var(--primary-color)}@media screen and (max-width:576px){[_nghost-%COMP%]     .product-list-item{flex-direction:column;align-items:center}[_nghost-%COMP%]     .product-list-item img{width:75%;margin:2rem 0}[_nghost-%COMP%]     .product-list-item .product-list-detail{text-align:center}[_nghost-%COMP%]     .product-list-item .product-price{align-self:center}[_nghost-%COMP%]     .product-list-item .product-list-action{display:flex;flex-direction:column}[_nghost-%COMP%]     .product-list-item .product-list-action{margin-top:2rem;flex-direction:row;justify-content:space-between;align-items:center;width:100%}}"]}),e})();var ce=i("zUwj"),le=i("J7/z"),ue=i("Rp2L"),de=i("/JoM"),pe=i("Gxio"),be=i("Nf9I"),me=i("rLzU");const he=["myInputFile"],ge=["mySplitButton"];function fe(e,t){if(1&e&&u.Nb(0,"img",48),2&e){const e=u.dc();u.kc("src",e.user.photo_path,u.Dc)}}function ve(e,t){1&e&&(u.cc(),u.Sb(0,"svg",49),u.Nb(1,"defs"),u.Sb(2,"g",50),u.Nb(3,"path",51),u.Rb(),u.Rb())}function Se(e,t){1&e&&(u.Sb(0,"small",52),u.Sb(1,"span"),u.Jc(2," Campo requerido. "),u.Rb(),u.Jc(3,"\xa0 "),u.Rb())}function Fe(e,t){1&e&&(u.Sb(0,"small",52),u.Sb(1,"span"),u.Jc(2," Campo requerido. "),u.Rb(),u.Jc(3,"\xa0 "),u.Rb())}function Re(e,t){1&e&&(u.Sb(0,"small",52),u.Sb(1,"span"),u.Jc(2," Campo requerido. "),u.Rb(),u.Jc(3,"\xa0 "),u.Rb())}function ye(e,t){1&e&&(u.Sb(0,"small",52),u.Sb(1,"span"),u.Jc(2," Campo requerido. "),u.Rb(),u.Jc(3,"\xa0 "),u.Rb())}function we(e,t){1&e&&(u.Sb(0,"small",52),u.Sb(1,"span"),u.Jc(2," Campo requerido. "),u.Rb(),u.Jc(3,"\xa0 "),u.Rb())}function Ie(e,t){1&e&&(u.Sb(0,"small",52),u.Sb(1,"span"),u.Jc(2," Campo requerido. "),u.Rb(),u.Jc(3,"\xa0 "),u.Rb())}function _e(e,t){1&e&&(u.Sb(0,"small",52),u.Sb(1,"span"),u.Jc(2," Email no v\xe1lido. "),u.Rb(),u.Jc(3,"\xa0 "),u.Rb())}function Be(e,t){1&e&&(u.Sb(0,"small",52),u.Sb(1,"span"),u.Jc(2," Campo num\xe9rico de 8 d\xedgitos. "),u.Rb(),u.Jc(3,"\xa0 "),u.Rb())}function ke(e,t){1&e&&(u.Sb(0,"small",52),u.Sb(1,"span"),u.Jc(2," Campo requerido. "),u.Rb(),u.Jc(3,"\xa0 "),u.Rb())}function Ce(e,t){1&e&&(u.Sb(0,"small",52),u.Sb(1,"span"),u.Jc(2," Campo requerido. "),u.Rb(),u.Jc(3,"\xa0 "),u.Rb())}const Me=function(){return{maxWidth:"100%"}};function xe(e,t){if(1&e&&(u.Sb(0,"div",21),u.Sb(1,"label",41),u.Jc(2,"Cargo"),u.Rb(),u.Nb(3,"p-dropdown",53),u.Hc(4,Ce,4,0,"small",24),u.Rb()),2&e){const e=u.dc();u.Bb(3),u.Fc(u.oc(5,Me)),u.kc("options",e.occupations)("showClear",!0),u.Bb(1),u.kc("ngIf",e.isFieldValidOcupation_id)}}function Ne(e,t){1&e&&(u.Sb(0,"small",52),u.Sb(1,"span"),u.Jc(2," Campo requerido. "),u.Rb(),u.Jc(3,"\xa0 "),u.Rb())}const Je=function(){return["Usuarios","Detalle","Informaci\xf3n General"]},De=function(){return{width:"50vw"}};let Pe=(()=>{class e{constructor(e,t,i,r,o,n,s){this.fb=e,this.authService=t,this.userService=i,this.messageService=r,this.dialogService=o,this.confirmationService=n,this.commonService=s,this.updated=new u.n,this.max_date=new Date,this.min_year=(new Date).getFullYear()-100,this.max_year=(new Date).getFullYear()-10,this.userForm=this.fb.group({first_name:[,[v.p.required,v.p.maxLength(30),v.p.pattern(/^(\s+\S+\s*)*(?!\s).*$/)]],second_name:[,[v.p.maxLength(30)]],first_surname:[,[v.p.required,v.p.maxLength(30),v.p.pattern(/^(\s+\S+\s*)*(?!\s).*$/)]],second_surname:[,[v.p.maxLength(30)]],contact_name:[,[v.p.maxLength(30)]],phone_number:[,[v.p.required,v.p.minLength(11)]],birthdate:[,[v.p.required]],email:[,[v.p.required,v.p.maxLength(40),v.p.pattern(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/)]],dni:[,[v.p.required,v.p.pattern(/^([0-9])*$/),v.p.minLength(8),v.p.maxLength(8)]],role_id:[,[v.p.required]],ocupation_id:[]}),this.occupations=[],this.roles=[],this.isFieldValidOcupation_id=!1}ngOnInit(){this.setDropdowns(),this.setCurrentUserForm(),this.urlBase=l.a.urlBase}setDropdowns(){this.commonService.getOcuppations().subscribe(e=>{200==e.code&&(this.occupations=e.list)}),this.roles=[{name:"Usuario",value:1},{name:"Administrador",value:2}]}isFieldValid(e){return this.userForm.controls[e].errors&&this.userForm.controls[e].touched}setCurrentUserForm(){this.userForm.reset({first_name:this.user.first_name,second_name:this.user.second_name,first_surname:this.user.first_surname,second_surname:this.user.second_surname,contact_name:this.user.contact_name,phone_number:this.user.phone_number,birthdate:this.user.birthdate?new Date(`${this.user.birthdate}`):null,dni:this.user.dni,email:this.user.email,role_id:this.user.role_id,ocupation_id:this.user.ocupation_id}),this.userStatus=this.user.enabled,this.setMenu(this.user.photo_path)}setMenu(e){this.items=[{label:e?"Cambiar avatar":"A\xf1adir avatar",icon:"pi pi-upload",command:()=>{this.clickInputFile()}}],e&&this.items.push({label:"Eliminar avatar",icon:"pi pi-trash",command:()=>{this.removeConfirm()}})}clickInputFile(){this.myInputFile.nativeElement.click()}submit(){var e;if(this.userForm.invalid)this.userForm.markAllAsTouched();else{if(this.userForm.value.role_id==n.a.USER){if(!this.userForm.value.ocupation_id)return void(this.isFieldValidOcupation_id=!0);this.isFieldValidOcupation_id=!1}else null===(e=this.userForm.get("ocupation_id"))||void 0===e||e.setValue(null);this.verifyChanges()||this.userService.update(Object.assign(Object.assign({},this.userForm.value),{id:this.user.id})).subscribe(e=>{var t,i,r,o,n,s,a,c,l,u;200==e.code?this.messageService.add({key:"tc",severity:"success",summary:"\xc9xito",detail:"Datos guardados correctamente"}):void 0!==(null===(t=e.errors)||void 0===t?void 0:t.birthdate)?this.showError(null===(i=e.errors.birthdate)||void 0===i?void 0:i.msg):void 0!==(null===(r=e.errors)||void 0===r?void 0:r.phone_number)?this.showError(null===(o=e.errors.phone_number)||void 0===o?void 0:o.msg):void 0!==(null===(n=e.errors)||void 0===n?void 0:n.first_name)?this.showError(null===(s=e.errors.first_name)||void 0===s?void 0:s.msg):void 0!==(null===(a=e.errors)||void 0===a?void 0:a.first_surname)?this.showError(null===(c=e.errors.first_surname)||void 0===c?void 0:c.msg):void 0!==(null===(l=e.errors)||void 0===l?void 0:l.id)&&this.showError(null===(u=e.errors.id)||void 0===u?void 0:u.msg),this.updated.emit(!0)},e=>{this.messageService.add({key:"tc",severity:"error",summary:"Error",detail:"Cont\xe1ctese con el administrador"})})}}verifyChanges(){return console.log(`this.user.ocupation_id ${this.user.ocupation_id} == this.userForm.value.ocupation_id ${this.userForm.value.ocupation_id} `),this.user.first_name==this.userForm.value.first_name&&this.user.second_name==this.userForm.value.second_name&&this.user.first_surname==this.userForm.value.first_surname&&this.user.second_surname==this.userForm.value.second_surname&&this.user.phone_number==this.userForm.value.phone_number&&this.user.contact_name==this.userForm.value.contact_name&&this.user.email==this.userForm.value.email&&this.user.dni==this.userForm.value.dni&&this.user.role_id==this.userForm.value.role_id&&this.user.ocupation_id==this.userForm.value.ocupation_id&&this.user.birthdate==new Date(this.userForm.value.birthdate).toISOString()}ngOnDestroy(){this.ref&&this.ref.close()}showCropper(e){this.ref=this.dialogService.open(ue.a,{data:{event:e},header:"Personalizar el nuevo avatar",width:"60%",contentStyle:{"max-height":"1000px",overflow:"auto"},baseZIndex:1}),this.ref.onClose.subscribe(e=>{e?this.userService.setPhotoById(e,this.user.id).subscribe(e=>{this.messageService.add(200==e.code?{key:"tc",severity:"success",summary:"\xc9xito",detail:"Avatar actualizado correctamente"}:{key:"tc",severity:"error",summary:"Error",detail:"No se pudo actualizar el avatar"}),this.updated.emit(!0)},e=>{this.messageService.add({key:"tc",severity:"error",summary:"Error",detail:"Cont\xe1ctese con el administrador"})}):"error"==e&&this.showError("Por favor seleccione otra","No se pudo procesar la imagen")})}edit(){this.mySplitButton.buttonViewChild.nativeElement.click()}onSelectImg(e){if(e.currentTarget.files){if(e.currentTarget.files[0].size>15e4)return void this.showError("Por favor suba una imagen menor a 150 KB","Imagen demasiado grande");this.showCropper(e)}}removePhoto(){this.userService.removePhotoById(this.user.id).subscribe(e=>{this.messageService.add(200==e.code?{key:"tc",severity:"success",summary:"\xc9xito",detail:"Avatar eliminado correctamente"}:{key:"tc",severity:"error",summary:"Incorrecto",detail:"El avatar no fue eliminado"}),this.updated.emit(!0)},e=>{this.messageService.add({key:"tc",severity:"error",summary:"Error",detail:"Cont\xe1ctese con el administrador"})})}removeConfirm(){this.confirmationService.confirm({message:"\xbfEst\xe1 seguro(a) que quiere eliminar el avatar?",header:"Confirmaci\xf3n",icon:"pi pi-info-circle",accept:()=>{this.removePhoto()},reject:e=>{}})}changeStatus(){this.confirmationService.confirm({message:`\xbfEst\xe1 seguro(a) que quiere ${this.userStatus?"habilitar":"inhabilitar"} a este usuario?`,header:"Confirmaci\xf3n",icon:"pi pi-info-circle",accept:()=>{this.userStatus?this.userService.enableUser(this.user.id).subscribe(e=>{this.messageService.add(200==e.code?{key:"tc",severity:"success",summary:"\xc9xito",detail:"El usuario fue habilitado correctamente"}:{key:"tc",severity:"error",summary:"Incorrecto",detail:"No se pudo cambiar el estado del usuario"}),this.updated.emit(!0)},e=>{this.messageService.add({key:"tc",severity:"error",summary:"Error",detail:"Cont\xe1ctese con el administrador"})}):this.userService.disableUser(this.user.id).subscribe(e=>{this.messageService.add(200==e.code?{key:"tc",severity:"success",summary:"\xc9xito",detail:"El usuario fue inhabilitado correctamente"}:{key:"tc",severity:"error",summary:"Incorrecto",detail:"No se pudo cambiar el estado del usuario"}),this.updated.emit(!0)},e=>{this.messageService.add({key:"tc",severity:"error",summary:"Error",detail:"Cont\xe1ctese con el administrador"})})},reject:e=>{this.userStatus=!this.userStatus}})}showError(e,t="Incorrecto"){this.messageService.add({key:"tc",severity:"error",summary:t,detail:e})}showWarning(e,t="Advertencia"){this.messageService.add({key:"tc",severity:"warn",summary:t,detail:e})}}return e.\u0275fac=function(t){return new(t||e)(u.Mb(v.c),u.Mb(de.a),u.Mb(d.a),u.Mb(h.g),u.Mb(le.a),u.Mb(h.a),u.Mb(f.a))},e.\u0275cmp=u.Gb({type:e,selectors:[["app-general-information"]],viewQuery:function(e,t){if(1&e&&(u.Pc(he,1),u.Pc(ge,1)),2&e){let e;u.xc(e=u.ac())&&(t.myInputFile=e.first),u.xc(e=u.ac())&&(t.mySplitButton=e.first)}},inputs:{user:"user"},outputs:{updated:"updated"},features:[u.Ab([h.g,le.a,h.a])],decls:81,vars:39,consts:[[1,"miniMenu",3,"options","icon"],["position","top-center","key","tc"],["rejectButtonStyleClass","p-button-text",3,"baseZIndex"],[1,"card","myCard","myBg","p-mt-2"],[1,"p-text-left","myTitle"],[1,"text-color"],[1,"p-fluid","p-grid"],[1,"p-field","p-col-12","p-md-4","p-pr-4"],["for","first_name",1,"p-text-left","text-color"],[1,"avatar-container"],["class","myAvatar","width","100%","alt","",3,"src",4,"ngIf"],["class","myAvatarSvg","viewBox","0 0 32 32","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["styleClass","p-button-secondary","label","Editar","icon","pi pi-pencil",1,"myAvatarBtn",3,"model","onClick"],["mySplitButton",""],["type","file","accept",".png,.jpg,.jpeg",1,"ocult",3,"change"],["myInputFile",""],[1,"p-text-left"],[1,"text-color",2,"margin-bottom","10px"],[3,"ngModel","ngModelChange","onChange"],[1,"p-field","p-col-12","p-md-8"],[1,"p-fluid","p-formgrid","p-grid",3,"formGroup","ngSubmit"],[1,"p-field","p-col-12","p-md-6"],["for","first_name",1,"text-color"],["id","first_name","type","text","pInputText","","formControlName","first_name","autocomplete","off"],["class","p-error",4,"ngIf"],["for","second_name",1,"text-color"],["id","second_name","type","text","pInputText","","formControlName","second_name","autocomplete","off"],["for","first_surname",1,"text-color"],["id","first_surname","type","text","pInputText","","formControlName","first_surname","autocomplete","off"],["for","second_surname",1,"text-color"],["id","second_surname","type","text","pInputText","","formControlName","second_surname","autocomplete","off"],[1,"p-field","p-col-12","p-md-7"],["for","birthdate",1,"text-color"],["dateFormat","dd/mm/yy","name","birthdate","id","birthdate","formControlName","birthdate","inputId","navigators",3,"showIcon","monthNavigator","yearNavigator","yearRange","maxDate"],[1,"p-field","p-col-12","p-md-5"],["for","phone_number",1,"text-color"],["formControlName","phone_number","mask","(+99) 999-999-999",3,"unmask","autoClear"],["for","email",1,"text-color"],["id","email","formControlName","email","type","text","pInputText","","autocomplete","off"],["for","dni",1,"text-color"],["formControlName","dni","mask","99999999",3,"unmask","autoClear"],["for","ocupation",1,"text-color"],["formControlName","role_id","placeholder","\xa0","name","role","optionValue","value","optionLabel","name",3,"options","showClear"],["class","p-field p-col-12 p-md-6 ",4,"ngIf"],["for","contact_name",1,"text-color"],["id","contact_name","type","text","pInputText","","formControlName","contact_name","autocomplete","off"],[1,"p-field","p-col-12","p-md-12","p-mt-2"],["type","submit","pButton","","label","Guardar datos","icon","pi pi-save",1,"myBtnInput","p-button-primary"],["width","100%","alt","",1,"myAvatar",3,"src"],["viewBox","0 0 32 32","xmlns","http://www.w3.org/2000/svg",1,"myAvatarSvg"],["id","User"],["d","M28,22.5c0,3.645-5.2715,6.5-12,6.5S4,26.145,4,22.5,9.2715,16,16,16,28,18.855,28,22.5ZM16,14a5.5,5.5,0,1,0-5.5-5.5A5.5066,5.5066,0,0,0,16,14Z",1,"cls-1"],[1,"p-error"],["formControlName","ocupation_id","placeholder","\xa0","name","ocupation_id","optionValue","id","optionLabel","name",3,"options","showClear"]],template:function(e,t){1&e&&(u.Nb(0,"app-mini-menu",0),u.Nb(1,"p-toast",1),u.Nb(2,"p-confirmDialog",2),u.Sb(3,"div",3),u.Sb(4,"div",4),u.Jc(5,"Informaci\xf3n General "),u.Rb(),u.Sb(6,"h3",5),u.Jc(7,"Actualizar informaci\xf3n general del usuario "),u.Rb(),u.Nb(8,"br"),u.Sb(9,"div",6),u.Sb(10,"div",7),u.Sb(11,"label",8),u.Jc(12,"Avatar"),u.Rb(),u.Nb(13,"br"),u.Sb(14,"div",9),u.Hc(15,fe,1,1,"img",10),u.Hc(16,ve,4,0,"svg",11),u.Sb(17,"p-splitButton",12,13),u.Zb("onClick",function(){return t.clickInputFile()}),u.Rb(),u.Sb(19,"input",14,15),u.Zb("change",function(e){return t.onSelectImg(e)}),u.Rb(),u.Rb(),u.Nb(21,"br"),u.Sb(22,"div",16),u.Sb(23,"h4",17),u.Jc(24,"Habilitar usuario"),u.Rb(),u.Sb(25,"p-inputSwitch",18),u.Zb("ngModelChange",function(e){return t.userStatus=e})("onChange",function(){return t.changeStatus()}),u.Rb(),u.Rb(),u.Rb(),u.Sb(26,"div",19),u.Sb(27,"form",20),u.Zb("ngSubmit",function(){return t.submit()}),u.Sb(28,"div",21),u.Sb(29,"label",22),u.Jc(30,"Primer nombre"),u.Rb(),u.Nb(31,"input",23),u.Hc(32,Se,4,0,"small",24),u.Rb(),u.Sb(33,"div",21),u.Sb(34,"label",25),u.Jc(35,"Segundo nombre"),u.Rb(),u.Nb(36,"input",26),u.Hc(37,Fe,4,0,"small",24),u.Rb(),u.Sb(38,"div",21),u.Sb(39,"label",27),u.Jc(40,"Primer apellido"),u.Rb(),u.Nb(41,"input",28),u.Hc(42,Re,4,0,"small",24),u.Rb(),u.Sb(43,"div",21),u.Sb(44,"label",29),u.Jc(45,"Segundo apellido"),u.Rb(),u.Nb(46,"input",30),u.Hc(47,ye,4,0,"small",24),u.Rb(),u.Sb(48,"div",31),u.Sb(49,"label",32),u.Jc(50,"Fecha de nacimiento"),u.Rb(),u.Nb(51,"p-calendar",33),u.Hc(52,we,4,0,"small",24),u.Rb(),u.Sb(53,"div",34),u.Sb(54,"label",35),u.Jc(55,"N\xfamero de celular"),u.Rb(),u.Nb(56,"p-inputMask",36),u.Hc(57,Ie,4,0,"small",24),u.Rb(),u.Sb(58,"div",31),u.Sb(59,"label",37),u.Jc(60,"Email"),u.Rb(),u.Nb(61,"input",38),u.Hc(62,_e,4,0,"small",24),u.Rb(),u.Sb(63,"div",34),u.Sb(64,"label",39),u.Jc(65,"Dni"),u.Rb(),u.Nb(66,"p-inputMask",40),u.Hc(67,Be,4,0,"small",24),u.Rb(),u.Sb(68,"div",21),u.Sb(69,"label",41),u.Jc(70,"Rol"),u.Rb(),u.Nb(71,"p-dropdown",42),u.Hc(72,ke,4,0,"small",24),u.Rb(),u.Hc(73,xe,5,6,"div",43),u.Sb(74,"div"),u.Sb(75,"label",44),u.Jc(76,"Nombre de contacto"),u.Rb(),u.Nb(77,"input",45),u.Hc(78,Ne,4,0,"small",24),u.Rb(),u.Sb(79,"div",46),u.Nb(80,"button",47),u.Rb(),u.Rb(),u.Rb(),u.Rb(),u.Rb()),2&e&&(u.kc("options",u.oc(36,Je))("icon","home"),u.Bb(2),u.Fc(u.oc(37,De)),u.kc("baseZIndex",1e4),u.Bb(13),u.kc("ngIf",t.user.photo_path),u.Bb(1),u.kc("ngIf",!t.user.photo_path),u.Bb(1),u.kc("model",t.items),u.Bb(8),u.kc("ngModel",t.userStatus),u.Bb(2),u.kc("formGroup",t.userForm),u.Bb(5),u.kc("ngIf",t.isFieldValid("first_name")),u.Bb(5),u.kc("ngIf",t.isFieldValid("second_name")),u.Bb(5),u.kc("ngIf",t.isFieldValid("first_surname")),u.Bb(5),u.kc("ngIf",t.isFieldValid("second_surname")),u.Bb(4),u.kc("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.min_year+":"+t.max_year)("maxDate",t.max_date),u.Bb(1),u.kc("ngIf",t.isFieldValid("birthdate")),u.Bb(4),u.kc("unmask",!0)("autoClear",!1),u.Bb(1),u.kc("ngIf",t.isFieldValid("phone_number")),u.Bb(5),u.kc("ngIf",t.isFieldValid("email")),u.Bb(4),u.kc("unmask",!0)("autoClear",!1),u.Bb(1),u.kc("ngIf",t.isFieldValid("dni")),u.Bb(4),u.Fc(u.oc(38,Me)),u.kc("options",t.roles)("showClear",!0),u.Bb(1),u.kc("ngIf",t.isFieldValid("role_id")),u.Bb(1),u.kc("ngIf",2!=t.userForm.value.role_id),u.Bb(1),u.Db("p-field p-col-12  p-md-"+(2!=t.userForm.value.role_id?"12":"6")),u.Bb(4),u.kc("ngIf",t.isFieldValid("contact_name")))},directives:[p.a,pe.a,be.a,r.l,M.a,me.a,v.i,v.l,v.q,v.j,v.e,v.b,S.a,v.d,R.a,F.a,y.a,w.b],styles:[""]}),e})();var He=i("kSmT"),Te=i("+F6F"),Ee=i("hYoW"),Oe=i("DnMA"),Ae=i("MhiG"),Ze=i("gYft"),Le=i("rEr+"),Ue=i("QtfB");const ze=["p"];function je(e,t){if(1&e){const e=u.Tb();u.Sb(0,"app-filter-component",14),u.Zb("filterEvent",function(t){return u.Bc(e),u.dc().filterEvent(t)})("closeFilter",function(){return u.Bc(e),u.dc().closeFilterWindow()}),u.Rb()}if(2&e){const e=u.dc();u.kc("documentFilterInput",e.documentFilter)}}function $e(e,t){if(1&e){const e=u.Tb();u.Sb(0,"div",15),u.Sb(1,"p-splitButton",16),u.Zb("onClick",function(){return u.Bc(e),u.dc().show()}),u.Rb(),u.Sb(2,"span",17),u.Nb(3,"i",18),u.Sb(4,"input",19),u.Zb("ngModelChange",function(t){return u.Bc(e),u.dc().documentFilter.name=t})("ngModelChange",function(t){return u.Bc(e),u.dc().searchEvent(t)}),u.Rb(),u.Rb(),u.Rb()}if(2&e){const e=u.dc();u.Bb(1),u.kc("model",e.items),u.Bb(3),u.kc("ngModel",e.documentFilter.name)}}function Ve(e,t){1&e&&u.Nb(0,"i",30)}function qe(e,t){1&e&&u.Nb(0,"i",31)}function Ke(e,t){1&e&&u.Nb(0,"i",32)}function Ge(e,t){1&e&&u.Nb(0,"i",30)}function We(e,t){1&e&&u.Nb(0,"i",31)}function Ye(e,t){1&e&&u.Nb(0,"i",32)}function Qe(e,t){1&e&&u.Nb(0,"i",30)}function Xe(e,t){1&e&&u.Nb(0,"i",33)}function et(e,t){1&e&&u.Nb(0,"i",34)}function tt(e,t){1&e&&u.Nb(0,"i",30)}function it(e,t){1&e&&u.Nb(0,"i",33)}function rt(e,t){1&e&&u.Nb(0,"i",34)}function ot(e,t){1&e&&u.Nb(0,"i",30)}function nt(e,t){1&e&&u.Nb(0,"i",33)}function st(e,t){1&e&&u.Nb(0,"i",34)}const at=function(e){return[e,1]};function ct(e,t){if(1&e){const e=u.Tb();u.Sb(0,"tr"),u.Sb(1,"th",20),u.Zb("click",function(){return u.Bc(e),u.dc().sortByField(2)}),u.Jc(2," Nombre del documento "),u.Hc(3,Ve,1,0,"i",21),u.Hc(4,qe,1,0,"i",22),u.Hc(5,Ke,1,0,"i",23),u.Rb(),u.Sb(6,"th",24),u.Zb("click",function(){return u.Bc(e),u.dc().sortByField(3)}),u.Jc(7," Categor\xeda "),u.Hc(8,Ge,1,0,"i",21),u.Hc(9,We,1,0,"i",22),u.Hc(10,Ye,1,0,"i",23),u.Rb(),u.Sb(11,"th",25),u.Zb("click",function(){return u.Bc(e),u.dc().sortByField(4)}),u.Jc(12," Fecha de env\xedo "),u.Hc(13,Qe,1,0,"i",21),u.Hc(14,Xe,1,0,"i",26),u.Hc(15,et,1,0,"i",27),u.Rb(),u.Sb(16,"th",28),u.Zb("click",function(){return u.Bc(e),u.dc().sortByField(5)}),u.Jc(17," Estado "),u.Hc(18,tt,1,0,"i",21),u.Hc(19,it,1,0,"i",26),u.Hc(20,rt,1,0,"i",27),u.Rb(),u.Sb(21,"th",25),u.Zb("click",function(){return u.Bc(e),u.dc().sortByField(6)}),u.Jc(22," Fecha de estado "),u.Hc(23,ot,1,0,"i",21),u.Hc(24,nt,1,0,"i",26),u.Hc(25,st,1,0,"i",27),u.Rb(),u.Sb(26,"th",29),u.Jc(27,"Acciones"),u.Rb(),u.Rb()}if(2&e){const e=u.dc();u.Bb(3),u.kc("ngIf",!(u.pc(15,at,-1).includes(e.documentFilter.orderSort)&&2==e.documentFilter.fieldSort)),u.Bb(1),u.kc("ngIf",-1==e.documentFilter.orderSort&&2==e.documentFilter.fieldSort),u.Bb(1),u.kc("ngIf",1==e.documentFilter.orderSort&&2==e.documentFilter.fieldSort),u.Bb(3),u.kc("ngIf",!(u.pc(17,at,-1).includes(e.documentFilter.orderSort)&&3==e.documentFilter.fieldSort)),u.Bb(1),u.kc("ngIf",-1==e.documentFilter.orderSort&&3==e.documentFilter.fieldSort),u.Bb(1),u.kc("ngIf",1==e.documentFilter.orderSort&&3==e.documentFilter.fieldSort),u.Bb(3),u.kc("ngIf",!(u.pc(19,at,-1).includes(e.documentFilter.orderSort)&&4==e.documentFilter.fieldSort)),u.Bb(1),u.kc("ngIf",-1==e.documentFilter.orderSort&&4==e.documentFilter.fieldSort),u.Bb(1),u.kc("ngIf",1==e.documentFilter.orderSort&&4==e.documentFilter.fieldSort),u.Bb(3),u.kc("ngIf",!(u.pc(21,at,-1).includes(e.documentFilter.orderSort)&&5==e.documentFilter.fieldSort)),u.Bb(1),u.kc("ngIf",-1==e.documentFilter.orderSort&&5==e.documentFilter.fieldSort),u.Bb(1),u.kc("ngIf",1==e.documentFilter.orderSort&&5==e.documentFilter.fieldSort),u.Bb(3),u.kc("ngIf",!(u.pc(23,at,-1).includes(e.documentFilter.orderSort)&&6==e.documentFilter.fieldSort)),u.Bb(1),u.kc("ngIf",-1==e.documentFilter.orderSort&&6==e.documentFilter.fieldSort),u.Bb(1),u.kc("ngIf",1==e.documentFilter.orderSort&&6==e.documentFilter.fieldSort)}}function lt(e,t){if(1&e){const e=u.Tb();u.Sb(0,"tr",36),u.Sb(1,"td"),u.Jc(2),u.Rb(),u.Sb(3,"td"),u.Nb(4,"i",37),u.Jc(5),u.Rb(),u.Sb(6,"td"),u.Jc(7),u.ec(8,"titlecase"),u.ec(9,"date"),u.Rb(),u.Sb(10,"td",38),u.Sb(11,"span"),u.Jc(12),u.Rb(),u.Rb(),u.Sb(13,"td"),u.Jc(14),u.ec(15,"titlecase"),u.ec(16,"date"),u.Rb(),u.Sb(17,"td",38),u.Sb(18,"button",39),u.Zb("click",function(){u.Bc(e);const t=u.dc().$implicit;return u.dc().goToDetail(t.id)}),u.Rb(),u.Sb(19,"a",40),u.Nb(20,"button",41),u.Rb(),u.Rb(),u.Rb()}if(2&e){const e=u.dc().$implicit,t=u.dc();u.kc("pSelectableRow",e),u.Bb(2),u.Lc("",e.name," "),u.Bb(3),u.Lc(" \xa0 ",null==e.documentsubcategory||null==e.documentsubcategory.documentcategory?null:e.documentsubcategory.documentcategory.name,""),u.Bb(2),u.Kc(u.fc(8,9,u.gc(9,11,e.createdAt,"MMM d, y hh:mm a"))),u.Bb(4),u.Db(" status "+t.getStatusClass(e.status)),u.Bb(1),u.Kc(null==e.status?"Pendiente":e.status?"Aprobado":"Rechazado"),u.Bb(2),u.Kc(e.status_date?u.fc(15,14,u.gc(16,16,e.status_date,"MMM d, y hh:mm a")):"-"),u.Bb(5),u.kc("href",e.path,u.Dc)}}function ut(e,t){if(1&e&&u.Hc(0,lt,21,19,"tr",35),2&e){const e=u.dc();u.kc("ngIf",e.documentsFound)}}function dt(e,t){1&e&&(u.Sb(0,"div",42),u.Sb(1,"h3",43),u.Jc(2,"No se encontraron documentos"),u.Rb(),u.Rb())}const pt=function(){return["Usuarios","Detalle","Documentos"]},bt=function(){return{width:"34em"}},mt=function(){return[5,10,15,20]};let ht=(()=>{class e{constructor(e,t){this.documentService=e,this.router=t,this.visibleSidebar=!1,this.documentsFound=!0,this.documentFilterResult=new c.a,this.documentFilter=new Oe.a,this.lastName="",this.timer=null}ngOnInit(){this.items=[{label:"Limpiar ",icon:"pi pi-filter-slash",command:()=>{var e;localStorage.removeItem("docByUserFilter"),this.documentFilter=new Oe.a,null===(e=this.paginator)||void 0===e||e.changePage(0)}},{separator:!0},{label:"Refrescar",icon:"pi pi-refresh",command:()=>{var e;this.documentFilter.fieldSort=void 0,null===(e=this.paginator)||void 0===e||e.changePage(0)}}],this.urlBase=l.a.urlBase,this.documentFilter=JSON.parse(localStorage.getItem("docByUserFilter"))?JSON.parse(localStorage.getItem("docByUserFilter")):new Oe.a,this.documentFilter=this.user.id!==this.documentFilter.user_id?new Oe.a:this.documentFilter,this.documentFilter.size=this.documentFilter.size?this.documentFilter.size:5,this.submit(this.documentFilter.page?this.documentFilter.page:0)}ngAfterViewInit(){var e;0!==(null===(e=this.documentFilter)||void 0===e?void 0:e.page)&&setTimeout(()=>{var e;null===(e=this.paginator)||void 0===e||e.changePage(this.documentFilter.page?this.documentFilter.page:0)},300)}submit(e){this.documentFilter.page=e,this.documentFilter.user_id=this.user.id,this.documentService.filterDocumentsAdmin(this.documentFilter).subscribe(e=>{200==e.code?(this.documentsFound=!0,this.documentFilterResult=e.object):404==e.code&&(this.documentsFound=!1,this.documentFilterResult.list=[]),localStorage.setItem("docByUserFilter",JSON.stringify(this.documentFilter))})}paginate(e){this.documentFilter.size=e.rows,this.submit(e.page)}getStatusClass(e){return Object(Ae.d)(e)}goToDetail(e){this.router.navigate(["documents/detail/"+e],{queryParams:{isUserDetailPrev:!0}})}sortByField(e){var t;this.documentFilter.fieldSort=e,this.documentFilter.orderSort=this.lastField==e&&1==this.documentFilter.orderSort?-1:1,this.lastField=e,null===(t=this.paginator)||void 0===t||t.changePage(0)}searchEvent(e){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.search(e)},700)}search(e){e!==this.lastName&&this.submit(0),this.lastName=e}closeFilterWindow(){this.visibleSidebar=!1}show(){this.visibleSidebar=!0}filterEvent(e){e&&(this.documentFilter=Object.assign({},e),this.submit(0)),this.closeFilterWindow()}}return e.\u0275fac=function(t){return new(t||e)(u.Mb(Ze.a),u.Mb(o.b))},e.\u0275cmp=u.Gb({type:e,selectors:[["app-user-documents"]],viewQuery:function(e,t){if(1&e&&u.Pc(ze,1),2&e){let e;u.xc(e=u.ac())&&(t.paginator=e.first)}},inputs:{user:"user"},decls:16,vars:23,consts:[[3,"options","icon"],[1,"myFormFilter",3,"blockScroll","visible","baseZIndex","visibleChange"],[3,"documentFilterInput","filterEvent","closeFilter",4,"ngIf"],[1,"p-mt-2"],[1,"card","myCard","myBg"],[1,"p-text-left","myTitle",2,"margin-bottom","0"],["sortMode","multiple","styleClass","p-datatable-striped",3,"value"],["t",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[3,"rows","showCurrentPageReport","showJumpToPageDropdown","currentPageReportTemplate","totalRecords","pageLinkSize","rowsPerPageOptions","onPageChange"],["p",""],["class","p-d-flex p-jc-center",4,"ngIf"],[3,"documentFilterInput","filterEvent","closeFilter"],[1,"p-d-flex","p-flex-column","p-flex-md-row","p-jc-md-between"],["label","Aplicar Filtros","icon","pi pi-filter","styleClass","p-button-primary",3,"model","onClick"],[1,"p-input-icon-left","p-mb-2","p-mb-md-0"],[1,"pi","pi-search"],["type","search","pInputText","","autocomplete","off","placeholder","Buscar por nombre","name","name",3,"ngModel","ngModelChange"],[2,"cursor","pointer","width","21%",3,"click"],["class","pi pi-sort-alt",4,"ngIf"],["class","pi pi-sort-alpha-down-alt",4,"ngIf"],["class","pi pi-sort-alpha-up",4,"ngIf"],[2,"cursor","pointer","width","15%",3,"click"],[2,"cursor","pointer","width","20%",3,"click"],["class","pi pi-sort-amount-down",4,"ngIf"],["class","pi pi-sort-amount-up-alt",4,"ngIf"],[2,"cursor","pointer","width","12%","text-align","center",3,"click"],[2,"width","12%","text-align","center"],[1,"pi","pi-sort-alt"],[1,"pi","pi-sort-alpha-down-alt"],[1,"pi","pi-sort-alpha-up"],[1,"pi","pi-sort-amount-down"],[1,"pi","pi-sort-amount-up-alt"],[3,"pSelectableRow",4,"ngIf"],[3,"pSelectableRow"],[1,"pi","pi-tag","tag-color"],[2,"text-align","center"],["pButton","","pRipple","","type","button","icon","pi pi-eye",1,"p-button-info","p-mr-1",3,"click"],["target","blank",2,"text-decoration","none",3,"href"],["pButton","","pRipple","","type","button","icon","pi pi-download",1,"p-button-info","p-mr-1","p-mt-1"],[1,"p-d-flex","p-jc-center"],[1,"primary-color"]],template:function(e,t){1&e&&(u.Nb(0,"app-mini-menu",0),u.Sb(1,"p-sidebar",1),u.Zb("visibleChange",function(e){return t.visibleSidebar=e}),u.Hc(2,je,1,1,"app-filter-component",2),u.Rb(),u.Sb(3,"div",3),u.Sb(4,"div",4),u.Sb(5,"h2",5),u.Jc(6," Historial de documentos "),u.Rb(),u.Sb(7,"p-table",6,7),u.Hc(9,$e,5,2,"ng-template",8),u.Hc(10,ct,28,25,"ng-template",9),u.Hc(11,ut,1,1,"ng-template",10),u.Rb(),u.Nb(12,"br"),u.Sb(13,"p-paginator",11,12),u.Zb("onPageChange",function(e){return t.paginate(e)}),u.Rb(),u.Hc(15,dt,3,0,"div",13),u.Rb(),u.Rb()),2&e&&(u.kc("options",u.oc(20,pt))("icon","home"),u.Bb(1),u.Fc(u.oc(21,bt)),u.kc("blockScroll",!0)("visible",t.visibleSidebar)("baseZIndex",1e4),u.Bb(1),u.kc("ngIf",t.visibleSidebar),u.Bb(5),u.kc("value",t.documentFilterResult.list),u.Bb(6),u.Db(t.documentsFound?"":"ocult"),u.nc("currentPageReportTemplate","P\xe1gina ",t.documentFilterResult.currentPage+1," de ",t.documentFilterResult.totalPages,""),u.kc("rows",t.documentFilter.size)("showCurrentPageReport",!0)("showJumpToPageDropdown",!1)("totalRecords",t.documentFilterResult.totalItems)("pageLinkSize",3)("rowsPerPageOptions",u.oc(22,mt)),u.Bb(2),u.kc("ngIf",!t.documentsFound))},directives:[p.a,b.a,r.l,Le.b,h.i,g.a,Ue.a,M.a,v.b,S.a,v.i,v.l,Le.a,w.b],pipes:[r.t,r.e],styles:[""]}),e})();const gt=function(){return{"background-color":"#2196F3",color:"#ffffff"}};function ft(e,t){if(1&e&&(u.Nb(0,"p-avatar",14),u.ec(1,"uppercase")),2&e){const e=u.dc(2);u.Fc(u.oc(5,gt)),u.kc("label",u.fc(1,3,e.username[0]))}}function vt(e,t){if(1&e&&u.Nb(0,"img",15),2&e){const e=u.dc(2);u.kc("src",null==e.user?null:e.user.photo_path,u.Dc)}}function St(e,t){1&e&&u.Nb(0,"p-tag",16)}function Ft(e,t){1&e&&u.Nb(0,"p-tag",17)}function Rt(e,t){if(1&e){const e=u.Tb();u.Sb(0,"app-general-information",18),u.Zb("updated",function(t){return u.Bc(e),u.dc(2).reload(t)}),u.Rb()}if(2&e){const e=u.dc(2);u.kc("user",e.user)}}function yt(e,t){if(1&e&&u.Nb(0,"app-user-documents",19),2&e){const e=u.dc(2);u.kc("user",e.user)}}function wt(e,t){if(1&e&&(u.Sb(0,"div",2),u.Sb(1,"div",3),u.Sb(2,"div",4),u.Sb(3,"h2",5),u.Hc(4,ft,2,6,"p-avatar",6),u.Hc(5,vt,1,1,"img",7),u.Jc(6),u.ec(7,"titlecase"),u.ec(8,"titlecase"),u.Hc(9,St,1,0,"p-tag",8),u.Hc(10,Ft,1,0,"p-tag",9),u.Rb(),u.Rb(),u.Nb(11,"p-panelMenu",10),u.Rb(),u.Sb(12,"div",11),u.Hc(13,Rt,1,1,"app-general-information",12),u.Hc(14,yt,1,1,"app-user-documents",13),u.Rb(),u.Rb()),2&e){const e=u.dc();u.Bb(4),u.kc("ngIf",!(null!=e.user&&e.user.photo_path)),u.Bb(1),u.kc("ngIf",null==e.user?null:e.user.photo_path),u.Bb(1),u.Mc(" ",u.fc(7,9,null==e.user?null:e.user.first_name)," ",u.fc(8,11,null==e.user?null:e.user.first_surname)," \xa0\xa0 "),u.Bb(3),u.kc("ngIf",e.user.enabled),u.Bb(1),u.kc("ngIf",!e.user.enabled),u.Bb(1),u.kc("model",e.items),u.Bb(2),u.kc("ngIf",e.router.url.includes("general-information")),u.Bb(1),u.kc("ngIf",e.router.url.includes("documents"))}}const It=[{path:"",children:[{path:"",component:ae,canLoad:[s.a],canActivate:[s.a],data:{USER_ROLES:[n.a.USER_ADMIN],MODULE:ce.a.USERS}},{path:"detail/:id",component:(()=>{class e{constructor(e,t,i,r){this.userService=e,this.messageService=t,this.route=i,this.router=r,this.items=[],this.username=""}ngOnInit(){var e;this.userId=null===(e=this.route.snapshot.paramMap.get("id"))||void 0===e?void 0:e.toString(),this.loadUserData(),this.urlBase=l.a.urlBase}loadUserData(){this.userService.getUserById(this.userId).subscribe(e=>{var t;200==e.code?(this.user=e.object,this.username=`${e.object.first_name}`.trim(),this.setItems(),null===(t=this.generalData)||void 0===t||t.setMenu(this.user.photo_path)):404===e.code&&(this.messageService.add({key:"tc",severity:"warn",summary:"No encontrado",detail:"El usuario no existe"}),setTimeout(()=>{this.router.navigate(["./users/"])},3e3))})}setItems(){this.items=[{label:"Informaci\xf3n General",icon:"pi pi-fw pi-user-edit",routerLink:`/users/detail/${this.user.id}/general-information`},{label:"Documentos",icon:"pi pi-fw pi-file",routerLink:`/users/detail/${this.user.id}/documents`}]}reload(e){this.loadUserData()}}return e.\u0275fac=function(t){return new(t||e)(u.Mb(d.a),u.Mb(h.g),u.Mb(o.a),u.Mb(o.b))},e.\u0275cmp=u.Gb({type:e,selectors:[["app-detail"]],viewQuery:function(e,t){if(1&e&&u.Pc(Pe,1),2&e){let e;u.xc(e=u.ac())&&(t.generalData=e.first)}},features:[u.Ab([h.g])],decls:2,vars:1,consts:[["position","top-center","key","tc"],["class","p-grid",4,"ngIf"],[1,"p-grid"],[1,"p-col-3"],[1,"p-grid","p-mt-3","p-mb-3","p-ml-2"],[1,"text-color",2,"margin","0"],["styleClass","p-mr-2","shape","circle",3,"label","style",4,"ngIf"],["alt","user?.photo_path","class","myMiniAvatar",3,"src",4,"ngIf"],["styleClass","p-mr-2","severity","success","value","HABILITADO",4,"ngIf"],["severity","danger","value","INHABILITADO",4,"ngIf"],[3,"model"],[1,"p-col-9","p-pl-4"],[3,"user","updated",4,"ngIf"],[3,"user",4,"ngIf"],["styleClass","p-mr-2","shape","circle",3,"label"],["alt","user?.photo_path",1,"myMiniAvatar",3,"src"],["styleClass","p-mr-2","severity","success","value","HABILITADO"],["severity","danger","value","INHABILITADO"],[3,"user","updated"],[3,"user"]],template:function(e,t){1&e&&(u.Nb(0,"p-toast",0),u.Hc(1,wt,15,13,"div",1)),2&e&&(u.Bb(1),u.kc("ngIf",t.user))},directives:[pe.a,r.l,He.a,Te.a,Ee.a,Pe,ht],pipes:[r.t,r.u],styles:[""]}),e})(),canLoad:[s.a],canActivate:[s.a],data:{USER_ROLES:[n.a.USER_ADMIN],MODULE:ce.a.USERS},children:[{path:"general-information",component:Pe,canLoad:[s.a],canActivate:[s.a],data:{USER_ROLES:[n.a.USER_ADMIN],MODULE:ce.a.USERS}},{path:"documents",component:ht,canLoad:[s.a],canActivate:[s.a],data:{USER_ROLES:[n.a.USER_ADMIN],MODULE:ce.a.USERS}},{path:"**",redirectTo:"general-information"}]},{path:"**",redirectTo:""}]}];let _t=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.Kb({type:e}),e.\u0275inj=u.Jb({imports:[[o.f.forChild(It)],o.f]}),e})();var Bt=i("uPqY"),kt=i("V/fk"),Ct=i("oKuv"),Mt=i("PCNd");let xt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.Kb({type:e}),e.\u0275inj=u.Jb({imports:[[r.c,_t,Bt.a,kt.a,Ct.DocumentModule,v.o,Mt.a]]}),e})()}}]);