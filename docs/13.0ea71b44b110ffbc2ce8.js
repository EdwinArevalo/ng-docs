(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{XoyV:function(t,e,o){"use strict";o.r(e),o.d(e,"DashboardModule",function(){return A});var n=o("ofXK"),a=o("tyNb"),i=o("dgEK"),s=function(t){return t.light="theme-mdc-light-indigo",t.dark="theme-mdc-dark-indigo",t.vela="theme-vela-blue",t}({}),r=o("fXoL"),c=o("ETNk"),d=o("AytR"),h=o("tk/3");let b=(()=>{class t{constructor(t){this.http=t}getUserStatusCount(t){return this.http.post(`${d.a.urlBase}/api/users/getStatusCount`,{year:t})}getDocumentStatusCount(t){return this.http.post(`${d.a.urlBase}/api/documents/getStatusCount`,{year:t})}getEventsCount(t){return this.http.post(`${d.a.urlBase}/api/events/getCount`,{year:t})}getDocumentsCountMonthByYear(t){return this.http.post(`${d.a.urlBase}/api/documents/getCountMonthByYear`,{year:t})}}return t.\u0275fac=function(e){return new(e||t)(r.Wb(h.b))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var u=o("arFO"),l=o("3Pt+"),p=o("+07z"),m=o("7zfz"),g=o("0ADX"),C=o("I5S5");function S(t,e){if(1&t&&(r.Sb(0,"div",27),r.Sb(1,"div"),r.Jc(2),r.Rb(),r.Rb()),2&t){const t=e.$implicit;r.Bb(2),r.Kc(t.name)}}function f(t,e){if(1&t&&(r.Sb(0,"div",28),r.Sb(1,"h4",23),r.Jc(2,"\xa0"),r.Rb(),r.Nb(3,"p-chart",29),r.Rb()),2&t){const t=r.dc();r.Bb(3),r.kc("data",t.basicData)("options",t.basicOptions)("responsive",!0)}}const v=function(){return{"max-height":"450px"}},y=function(t){return["Tablero",t]};let R=(()=>{class t{constructor(t,e){this.themeService=t,this.dashboardService=e,this.currentYear=(new Date).getFullYear(),this.years=[],this.months=[],this.monthsSelected=[],this.themeColor="#495057"}ngOnInit(){this.setMonths(),this.loadYears(),this.loadSettingsForCharLine(),this.setDataCharLine(),this.getEventsCount(),this.loadSettingsPie(),this.setPieUsersAndCount(),this.setPieDocsAndCount()}loadYears(){for(let t=2021;t<=this.currentYear;t++)this.years.push({name:`A\xf1o ${t.toString()}`,id:t});this.years.unshift({name:"Hist\xf3rico",id:0})}sortMonths(){this.monthsSelected.sort((t,e)=>t.id<e.id?-1:t.id>e.id?1:0)}setMonths(){this.months=[{id:1,name:"Enero"},{id:2,name:"Febrero"},{id:3,name:"Marzo"},{id:4,name:"Abril"},{id:5,name:"Mayo"},{id:6,name:"Junio"},{id:7,name:"Julio"},{id:8,name:"Agosto"},{id:9,name:"Septiembre"},{id:10,name:"Octubre"},{id:11,name:"Noviembre"},{id:12,name:"Diciembre"}],this.monthsSelected=[...this.months]}loadSettingsForCharLine(){this.themeColor=this.themeService.getTheme()==s.dark||this.themeService.getTheme()==s.vela?"#ffffff":"#000000",this.basicOptions={legend:{position:"bottom",labels:{fontColor:this.themeColor}},scales:{xAxes:[{ticks:{fontColor:this.themeColor}}],yAxes:[{ticks:{fontColor:this.themeColor}}]}}}setDataCharLine(){this.dashboardService.getDocumentsCountMonthByYear(this.currentYear).subscribe(t=>{let e=t.list||[];this.basicData={labels:this.prepareDataForLine(e).map(t=>t.name),datasets:[{label:"Documentos",data:this.prepareDataForLine(e).map(t=>t.count),fill:!0,borderColor:"#968bd3"}]}})}prepareDataForLine(t){const e=[];return this.monthsSelected.forEach(o=>{let n=t.find(t=>t.month==o.id);e.push(n?{name:o.name,count:n.count}:{name:o.name,count:0})}),e}loadSettingsPie(){this.options={legend:{position:"bottom",labels:{fontColor:this.themeColor}}}}setPieUsersAndCount(){this.dashboardService.getUserStatusCount(this.currentYear).subscribe(t=>{let e=t.list||[];this.usersCount=t.data,this.userStatus={labels:e.map(t=>t.status),datasets:[{data:e.map(t=>t.count),backgroundColor:["#50adf4","#aecde5"],hoverBackgroundColor:["#50adf4","#aecde5"]}]}})}setPieDocsAndCount(){this.dashboardService.getDocumentStatusCount(this.currentYear).subscribe(t=>{this.docsCount=t.data;let e=t.list||[];this.docStatus={labels:e.map(t=>t.status),datasets:[{data:e.map(t=>t.count),backgroundColor:["#a6b2f4","#f29898","#b3b3b3"],hoverBackgroundColor:["#a6b2f4","#f29898","#b3b3b3"]}]}})}getEventsCount(){this.dashboardService.getEventsCount(this.currentYear).subscribe(t=>{this.eventsCount=t.data})}yearChange(){0==this.currentYear&&this.setMonths(),this.setPieUsersAndCount(),this.setPieDocsAndCount(),this.getEventsCount(),0!==this.currentYear&&this.setDataCharLine()}listChange(){this.sortMonths(),this.setDataCharLine()}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(c.a),r.Mb(b))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-index"]],decls:43,vars:23,consts:[[1,"p-mt-2"],[1,"p-grid","p-fluid"],[1,"p-col-3"],[1,"card","myCard","myBg"],[1,"p-text-left","myTitle",2,"margin-bottom","0"],["styleClass","p-mt-2","optionLabel","name","optionValue","id",3,"options","ngModel","ngModelChange","onChange"],[1,"p-col-12"],["optionLabel","name",1,"p-col-3",3,"disabled","options","ngModel","metaKeySelection","checkbox","filter","multiple","listStyle","onChange","ngModelChange"],["pTemplate","item"],[1,"p-col-9","p-pl-4"],[1,"miniMenu",3,"options","icon"],[1,"p-grid","p-fluid","p-mt-2",2,"margin","0"],[1,"p-col-4",2,"padding","0 5px 0 0"],[1,"card","myCardChart",2,"background-color","#AECDE5"],[1,"p-text-center",2,"margin","0"],[1,"p-text-center",2,"margin","0","margin-bottom","5px"],[1,"p-col-4",2,"padding","0 5px 0 5px"],[1,"card","myCardChart",2,"background-color","#A6B2F4"],[1,"p-col-4",2,"padding","0 0 0 5px"],[1,"card","myCardChart",2,"background-color","#bebebe"],["class","p-col-12 card myBg myCardChart p-mt-2 ",4,"ngIf"],[1,"p-col-6","p-mt-2",2,"padding","0 5px 0 0"],[1,"card","myBg","myCardChart"],[1,"text-color","p-text-center",2,"margin","0","margin-bottom","10px"],["type","pie",3,"data","options"],[1,"p-col-6","p-mt-2",2,"padding","0 0 0 5px"],["type","doughnut",3,"data","options"],[1,"country-item"],[1,"p-col-12","card","myBg","myCardChart","p-mt-2"],["type","line",3,"data","options","responsive"]],template:function(t,e){1&t&&(r.Sb(0,"div",0),r.Sb(1,"div",1),r.Sb(2,"div",2),r.Sb(3,"div",3),r.Sb(4,"h2",4),r.Jc(5,"Tablero "),r.Rb(),r.Sb(6,"p-dropdown",5),r.Zb("ngModelChange",function(t){return e.currentYear=t})("onChange",function(){return e.yearChange()}),r.Rb(),r.Sb(7,"div",1),r.Sb(8,"div",6),r.Sb(9,"p-listbox",7),r.Zb("onChange",function(){return e.listChange()})("ngModelChange",function(t){return e.monthsSelected=t}),r.Hc(10,S,3,1,"ng-template",8),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Sb(11,"div",9),r.Nb(12,"app-mini-menu",10),r.Sb(13,"div",11),r.Sb(14,"div",12),r.Sb(15,"div",13),r.Sb(16,"h1",14),r.Jc(17),r.Rb(),r.Sb(18,"h4",15),r.Jc(19," Usuarios registrados "),r.Rb(),r.Rb(),r.Rb(),r.Sb(20,"div",16),r.Sb(21,"div",17),r.Sb(22,"h1",14),r.Jc(23),r.Rb(),r.Sb(24,"h4",15),r.Jc(25," Documentos recibidos "),r.Rb(),r.Rb(),r.Rb(),r.Sb(26,"div",18),r.Sb(27,"div",19),r.Sb(28,"h1",14),r.Jc(29),r.Rb(),r.Sb(30,"h4",15),r.Jc(31," Eventos "),r.Rb(),r.Rb(),r.Rb(),r.Hc(32,f,4,3,"div",20),r.Sb(33,"div",21),r.Sb(34,"div",22),r.Sb(35,"h4",23),r.Jc(36,"Estado de los usuarios"),r.Rb(),r.Nb(37,"p-chart",24),r.Rb(),r.Rb(),r.Sb(38,"div",25),r.Sb(39,"div",22),r.Sb(40,"h4",23),r.Jc(41,"Estado de documentos"),r.Rb(),r.Nb(42,"p-chart",26),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Rb()),2&t&&(r.Bb(6),r.kc("options",e.years)("ngModel",e.currentYear),r.Bb(3),r.kc("disabled",0==e.currentYear)("options",e.months)("ngModel",e.monthsSelected)("metaKeySelection",!1)("checkbox",!0)("filter",!0)("multiple",!0)("listStyle",r.oc(20,v)),r.Bb(3),r.kc("options",r.pc(21,y,""+(0==e.currentYear?"Hist\xf3rico":e.currentYear)))("icon","home"),r.Bb(5),r.Lc(" ",e.usersCount," "),r.Bb(6),r.Lc(" ",e.docsCount," "),r.Bb(6),r.Lc(" ",e.eventsCount," "),r.Bb(3),r.kc("ngIf",0!=e.currentYear),r.Bb(5),r.kc("data",e.userStatus)("options",e.options),r.Bb(5),r.kc("data",e.docStatus)("options",e.options))},directives:[u.a,l.i,l.l,p.a,m.i,g.a,n.l,C.b],styles:[""]}),t})();var k=o("UKuc"),D=o("zUwj");const B=[{path:"",children:[{path:"",component:R,canLoad:[i.a],canActivate:[i.a],data:{USER_ROLES:[k.a.USER_ADMIN],MODULE:D.a.DASHBOARD}},{path:"**",redirectTo:""}]}];let M=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[[a.f.forChild(B)],a.f]}),t})();var x=o("uPqY"),Y=o("V/fk");let A=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[[n.c,x.a,Y.a,M]]}),t})()}}]);