(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{pU93:function(e,t,r){"use strict";r.r(t),r.d(t,"SettingsModule",function(){return me});var i=r("ofXK"),s=r("tyNb"),n=r("AytR"),a=r("fXoL"),o=r("x4NB"),c=r("kSmT"),l=r("+F6F");const d=function(){return{"background-color":"#2196F3",color:"#ffffff"}};function u(e,t){if(1&e&&(a.Ob(0,"p-avatar",7),a.fc(1,"uppercase")),2&e){const e=a.ec();a.Gc(a.pc(5,d)),a.lc("label",a.gc(1,3,e.username[0]))}}function m(e,t){if(1&e&&a.Ob(0,"img",8),2&e){const e=a.ec();a.lc("src",null==e.user?null:e.user.photo_path,a.Ec)}}let p=(()=>{class e{constructor(e){this.userService=e,this.username=""}onResize(e){this.innerWidth=window.innerWidth}ngOnInit(){this.innerWidth=window.innerWidth,this.urlBase=n.a.urlBase,this.loadCurrentUser(),this.items=[{label:"Cuenta",icon:"pi pi-fw pi-user-edit",routerLink:"/settings/account"},{label:"Seguridad",icon:"pi pi-fw pi-lock",routerLink:"/settings/security"},{label:"Apariencia",icon:"pi pi-fw pi-moon",routerLink:"/settings/appearance"}],this.userService.changeAvatarEmitter.subscribe(e=>{this.loadCurrentUser()})}loadCurrentUser(){this.userService.getCurrentUser().subscribe(e=>{200==e.code&&(this.user=e.object,this.username=`${e.object.first_name}`.trim())})}}return e.\u0275fac=function(t){return new(t||e)(a.Nb(o.a))},e.\u0275cmp=a.Hb({type:e,selectors:[["app-index"]],hostBindings:function(e,t){1&e&&a.ac("resize",function(e){return t.onResize(e)},!1,a.Bc)},decls:12,vars:11,consts:[[1,"p-grid","p-formgrid","p-fluid"],[1,"p-field","p-col-12","p-md-3"],["styleClass","p-mr-2","shape","circle",3,"label","style",4,"ngIf"],["alt","user?.photo_path","class","myMiniAvatar",3,"src",4,"ngIf"],[1,"text-color",2,"margin","0"],[3,"model"],[1,"p-field","p-col-12","p-md-9"],["styleClass","p-mr-2","shape","circle",3,"label"],["alt","user?.photo_path",1,"myMiniAvatar",3,"src"]],template:function(e,t){1&e&&(a.Tb(0,"div",0),a.Tb(1,"div",1),a.Tb(2,"div"),a.Ic(3,u,2,6,"p-avatar",2),a.Ic(4,m,1,1,"img",3),a.Tb(5,"h2",4),a.Kc(6),a.fc(7,"titlecase"),a.fc(8,"titlecase"),a.Sb(),a.Sb(),a.Ob(9,"p-panelMenu",5),a.Sb(),a.Tb(10,"div",6),a.Ob(11,"router-outlet"),a.Sb(),a.Sb()),2&e&&(a.Bb(2),a.Db("p-grid p-mt-3 p-mb-3 "+(t.innerWidth>767?" p-ml-2":" p-d-flex p-jc-center")),a.Bb(1),a.lc("ngIf",!(null!=t.user&&t.user.photo_path)),a.Bb(1),a.lc("ngIf",null==t.user?null:t.user.photo_path),a.Bb(2),a.Nc(" ",a.gc(7,7,null==t.user?null:t.user.first_name)," ",a.gc(8,9,null==t.user?null:t.user.first_surname)," "),a.Bb(3),a.lc("model",t.items))},directives:[i.l,c.a,s.g,l.a],pipes:[i.t,i.u],styles:[""]}),e})();var b=r("b4N3"),h=r("7zfz"),f=r("3Pt+"),v=r("J7/z"),g=r("Rp2L"),S=r("UKuc"),w=r("/JoM"),y=r("Gxio"),T=r("Nf9I"),_=r("Wq6t"),I=r("7kUa"),C=r("eO1q"),x=r("CwEU"),B=r("arFO"),k=r("jIHw"),F=r("0ADX");const E=["myInputFile"],K=["mySplitButton"],O=function(){return["Configuraci\xf3n","Cuenta"]};function N(e,t){1&e&&a.Ob(0,"app-mini-menu",45),2&e&&a.lc("options",a.pc(2,O))("icon","settings")}function A(e,t){if(1&e&&a.Ob(0,"img",46),2&e){const e=a.ec();a.lc("src",e.user.photo_path,a.Ec)}}function R(e,t){1&e&&(a.dc(),a.Tb(0,"svg",47),a.Ob(1,"defs"),a.Tb(2,"g",48),a.Ob(3,"path",49),a.Sb(),a.Sb())}function L(e,t){1&e&&(a.Tb(0,"small",50),a.Tb(1,"span"),a.Kc(2," Campo requerido. "),a.Sb(),a.Kc(3,"\xa0 "),a.Sb())}function U(e,t){1&e&&(a.Tb(0,"small",50),a.Tb(1,"span"),a.Kc(2," Campo requerido. "),a.Sb(),a.Kc(3,"\xa0 "),a.Sb())}function D(e,t){1&e&&(a.Tb(0,"small",50),a.Tb(1,"span"),a.Kc(2," Campo requerido. "),a.Sb(),a.Kc(3,"\xa0 "),a.Sb())}function M(e,t){1&e&&(a.Tb(0,"small",50),a.Tb(1,"span"),a.Kc(2," Campo requerido. "),a.Sb(),a.Kc(3,"\xa0 "),a.Sb())}function W(e,t){1&e&&(a.Tb(0,"small",50),a.Tb(1,"span"),a.Kc(2," Campo requerido. "),a.Sb(),a.Kc(3,"\xa0 "),a.Sb())}function q(e,t){1&e&&(a.Tb(0,"small",50),a.Tb(1,"span"),a.Kc(2," Campo requerido. "),a.Sb(),a.Kc(3,"\xa0 "),a.Sb())}function z(e,t){1&e&&(a.Tb(0,"small",50),a.Tb(1,"span"),a.Kc(2," Email no v\xe1lido. "),a.Sb(),a.Kc(3,"\xa0 "),a.Sb())}function V(e,t){1&e&&(a.Tb(0,"small",50),a.Tb(1,"span"),a.Kc(2," Campo num\xe9rico de 8 d\xedgitos. "),a.Sb(),a.Kc(3,"\xa0 "),a.Sb())}function j(e,t){1&e&&(a.Tb(0,"small",50),a.Tb(1,"span"),a.Kc(2," Campo requerido. "),a.Sb(),a.Kc(3,"\xa0 "),a.Sb())}const P=function(){return{width:"50vw"}},G=function(){return{width:"90%"}};let $=(()=>{class e{constructor(e,t,r,i,s,n){this.fb=e,this.authService=t,this.userService=r,this.messageService=i,this.dialogService=s,this.confirmationService=n,this.max_date=new Date,this.min_year=(new Date).getFullYear()-100,this.max_year=(new Date).getFullYear()-10,this.user=new b.a,this.isRoleAdmin=!1,this.userForm=this.fb.group({first_name:[,[f.p.required,f.p.maxLength(30),f.p.pattern(/^(\s+\S+\s*)*(?!\s).*$/)]],second_name:[,[f.p.maxLength(30)]],first_surname:[,[f.p.required,f.p.maxLength(30),f.p.pattern(/^(\s+\S+\s*)*(?!\s).*$/)]],second_surname:[,[f.p.maxLength(30)]],contact_name:[,[f.p.maxLength(30)]],phone_number:[,[f.p.required,f.p.minLength(11)]],birthdate:[,[f.p.required]],email:[,[f.p.required,f.p.maxLength(40),f.p.pattern(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/)]],dni:[,[f.p.required,f.p.pattern(/^([0-9])*$/),f.p.minLength(8),f.p.maxLength(8)]]})}onResize(e){this.innerWidth=window.innerWidth}ngOnInit(){this.innerWidth=window.innerWidth,this.getCurrentUser(),this.isRoleAdmin=this.authService.getUserRole()==S.a.USER_ADMIN,this.urlBase=n.a.urlBase}isFieldValid(e){return this.userForm.controls[e].errors&&this.userForm.controls[e].touched}getCurrentUser(){this.userService.getCurrentUser().subscribe(e=>{200==e.code&&(this.user=e.object,this.userForm.reset({first_name:this.user.first_name,second_name:this.user.second_name,first_surname:this.user.first_surname,second_surname:this.user.second_surname,contact_name:this.user.contact_name,phone_number:this.user.phone_number,birthdate:this.user.birthdate?new Date(`${this.user.birthdate}`):null,dni:this.user.dni,email:this.user.email}),this.setMenu(this.user.photo_path))},e=>{this.messageService.add({key:"tc",severity:"error",summary:"Error",detail:"Cont\xe1ctese con el administrador"})})}setMenu(e){this.items=[{label:e?"Cambiar avatar":"A\xf1adir avatar",icon:"pi pi-upload",command:()=>{this.clickInputFile()}}],e&&this.items.push({label:"Eliminar avatar",icon:"pi pi-trash",command:()=>{this.removeConfirm()}})}clickInputFile(){this.myInputFile.nativeElement.click()}submit(){this.userForm.invalid?this.userForm.markAllAsTouched():this.verifyChanges()||this.userService.updateCurrentUser(this.userForm.value).subscribe(e=>{var t,r,i,s,n,a,o,c;200==e.code?(this.messageService.add({key:"tc",severity:"success",summary:"\xc9xito",detail:"Datos guardados correctamente"}),this.getCurrentUser()):void 0!==(null===(t=e.errors)||void 0===t?void 0:t.birthdate)?this.showError(null===(r=e.errors.birthdate)||void 0===r?void 0:r.msg):void 0!==(null===(i=e.errors)||void 0===i?void 0:i.phone_number)?this.showError(null===(s=e.errors.phone_number)||void 0===s?void 0:s.msg):void 0!==(null===(n=e.errors)||void 0===n?void 0:n.first_name)?this.showError(null===(a=e.errors.first_name)||void 0===a?void 0:a.msg):void 0!==(null===(o=e.errors)||void 0===o?void 0:o.first_surname)&&this.showError(null===(c=e.errors.first_surname)||void 0===c?void 0:c.msg)},e=>{this.messageService.add({key:"tc",severity:"error",summary:"Error",detail:"Cont\xe1ctese con el administrador"})})}verifyChanges(){return this.user.first_name==this.userForm.value.first_name&&this.user.second_name==this.userForm.value.second_name&&this.user.first_surname==this.userForm.value.first_surname&&this.user.second_surname==this.userForm.value.second_surname&&this.user.phone_number==this.userForm.value.phone_number&&this.user.contact_name==this.userForm.value.contact_name&&this.user.email==this.userForm.value.email&&this.user.dni==this.userForm.value.dni&&this.user.birthdate==new Date(this.userForm.value.birthdate).toISOString()}ngOnDestroy(){this.ref&&this.ref.close()}showCropper(e){this.ref=this.dialogService.open(g.a,{data:{event:e},header:"Personaliza tu nuevo avatar",width:this.innerWidth>767?"65%":"90%",contentStyle:{"max-height":"1000px",overflow:"auto"},baseZIndex:1}),this.ref.onClose.subscribe(e=>{e?this.userService.setPhoto(e).subscribe(e=>{200==e.code?(this.messageService.add({key:"tc",severity:"success",summary:"\xc9xito",detail:"Avatar actualizado correctamente"}),this.userService.ChangeAvatarEmitter("")):this.messageService.add({key:"tc",severity:"error",summary:"Error",detail:"No se pudo actualizar el avatar"}),this.getCurrentUser()},e=>{this.messageService.add({key:"tc",severity:"error",summary:"Error",detail:"Cont\xe1ctese con el administrador"})}):"error"==e&&this.showError("Por favor seleccione otra","No se pudo procesar la imagen")})}edit(){console.log(this.mySplitButton.buttonViewChild.nativeElement.click())}onSelectImg(e){if(e.currentTarget.files){if(e.currentTarget.files[0].size>15e4)return void this.showError("Por favor suba una imagen menor a 150 KB","Imagen demasiado grande");this.showCropper(e)}}removePhoto(){this.userService.removePhoto().subscribe(e=>{200==e.code?(this.messageService.add({key:"tc",severity:"success",summary:"\xc9xito",detail:"Avatar eliminado correctamente"}),this.getCurrentUser()):this.messageService.add({key:"tc",severity:"error",summary:"Incorrecto",detail:"El avatar no fue eliminado"})},e=>{this.messageService.add({key:"tc",severity:"error",summary:"Error",detail:"Cont\xe1ctese con el administrador"})})}removeConfirm(){this.confirmationService.confirm({message:"\xbfEst\xe1 seguro(a) que quiere eliminar su avatar?",header:"Confirmaci\xf3n",icon:"pi pi-info-circle",accept:()=>{this.removePhoto()},reject:e=>{}})}showError(e,t="Incorrecto"){this.messageService.add({key:"tc",severity:"error",summary:t,detail:e})}showWarning(e,t="Advertencia"){this.messageService.add({key:"tc",severity:"warn",summary:t,detail:e})}}return e.\u0275fac=function(t){return new(t||e)(a.Nb(f.c),a.Nb(w.a),a.Nb(o.a),a.Nb(h.g),a.Nb(v.a),a.Nb(h.a))},e.\u0275cmp=a.Hb({type:e,selectors:[["app-account"]],viewQuery:function(e,t){if(1&e&&(a.Qc(E,1),a.Qc(K,1)),2&e){let e;a.yc(e=a.bc())&&(t.myInputFile=e.first),a.yc(e=a.bc())&&(t.mySplitButton=e.first)}},hostBindings:function(e,t){1&e&&a.ac("resize",function(e){return t.onResize(e)},!1,a.Bc)},features:[a.Ab([h.g,v.a,h.a])],decls:75,vars:32,consts:[["class","miniMenu",3,"options","icon",4,"ngIf"],["position","top-center","key","tc"],["rejectButtonStyleClass","p-button-text",3,"baseZIndex"],[1,"card","myCard","myBg","p-mt-2"],[1,"p-text-left","myTitle"],[1,"pi","pi-user",2,"font-size","1.5rem"],[1,"text-color"],[1,"p-fluid","p-grid"],[1,"p-field","p-col-12","p-md-4","p-pr-4"],["for","first_name",1,"p-text-left","text-color"],[1,"avatar-container"],["class","myAvatar","width","100%","alt","",3,"src",4,"ngIf"],["class","myAvatarSvg","viewBox","0 0 32 32","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["styleClass","p-button-secondary","label","Editar","icon","pi pi-pencil",1,"myAvatarBtn",3,"model","onClick"],["mySplitButton",""],["type","file","accept",".png,.jpg,.jpeg",1,"ocult",3,"change"],["myInputFile",""],[1,"p-field","p-col-12","p-md-8"],[1,"p-fluid","p-formgrid","p-grid",3,"formGroup","ngSubmit"],[1,"p-field","p-col-12","p-md-6"],["for","first_name",1,"text-color"],["id","first_name","type","text","pInputText","","formControlName","first_name","autocomplete","off"],["class","p-error",4,"ngIf"],["for","second_name",1,"text-color"],["id","second_name","type","text","pInputText","","formControlName","second_name","autocomplete","off"],["for","first_surname",1,"text-color"],["id","first_surname","type","text","pInputText","","formControlName","first_surname","autocomplete","off"],["for","second_surname",1,"text-color"],["id","second_surname","type","text","pInputText","","formControlName","second_surname","autocomplete","off"],[1,"p-field","p-col-12","p-md-7"],["for","birthdate",1,"text-color"],["dateFormat","dd/mm/yy","name","birthdate","id","birthdate","formControlName","birthdate","inputId","navigators",3,"showIcon","monthNavigator","yearNavigator","yearRange","maxDate"],[1,"p-field","p-col-12","p-md-5"],["for","phone_number",1,"text-color"],["formControlName","phone_number","mask","(+99) 999-999-999",3,"unmask","autoClear"],["for","email",1,"text-color"],["id","email","formControlName","email","type","text","pInputText","","autocomplete","off"],["for","dni",1,"text-color"],["formControlName","dni","mask","99999999",3,"unmask","autoClear"],["for","ocupation",1,"text-color"],[3,"optionDisabled","disabled","placeholder"],["for","contact_name",1,"text-color"],["id","contact_name","type","text","pInputText","","formControlName","contact_name","autocomplete","off"],[1,"p-field","p-col-12","p-md-12","p-mt-2"],["type","submit","pButton","","label","Guardar datos","icon","pi pi-save",1,"myBtnInput","p-button-primary"],[1,"miniMenu",3,"options","icon"],["width","100%","alt","",1,"myAvatar",3,"src"],["viewBox","0 0 32 32","xmlns","http://www.w3.org/2000/svg",1,"myAvatarSvg"],["id","User"],["d","M28,22.5c0,3.645-5.2715,6.5-12,6.5S4,26.145,4,22.5,9.2715,16,16,16,28,18.855,28,22.5ZM16,14a5.5,5.5,0,1,0-5.5-5.5A5.5066,5.5066,0,0,0,16,14Z",1,"cls-1"],[1,"p-error"]],template:function(e,t){1&e&&(a.Ic(0,N,1,3,"app-mini-menu",0),a.Ob(1,"p-toast",1),a.Ob(2,"p-confirmDialog",2),a.Tb(3,"div",3),a.Tb(4,"div",4),a.Kc(5,"Cuenta \xa0 "),a.Ob(6,"i",5),a.Sb(),a.Tb(7,"h3",6),a.Kc(8,"Actualiza tu informaci\xf3n general "),a.Sb(),a.Ob(9,"br"),a.Tb(10,"div",7),a.Tb(11,"div",8),a.Tb(12,"label",9),a.Kc(13,"Avatar"),a.Sb(),a.Ob(14,"br"),a.Tb(15,"div",10),a.Ic(16,A,1,1,"img",11),a.Ic(17,R,4,0,"svg",12),a.Tb(18,"p-splitButton",13,14),a.ac("onClick",function(){return t.clickInputFile()}),a.Sb(),a.Tb(20,"input",15,16),a.ac("change",function(e){return t.onSelectImg(e)}),a.Sb(),a.Sb(),a.Sb(),a.Tb(22,"div",17),a.Tb(23,"form",18),a.ac("ngSubmit",function(){return t.submit()}),a.Tb(24,"div",19),a.Tb(25,"label",20),a.Kc(26,"Primer nombre"),a.Sb(),a.Ob(27,"input",21),a.Ic(28,L,4,0,"small",22),a.Sb(),a.Tb(29,"div",19),a.Tb(30,"label",23),a.Kc(31,"Segundo nombre"),a.Sb(),a.Ob(32,"input",24),a.Ic(33,U,4,0,"small",22),a.Sb(),a.Tb(34,"div",19),a.Tb(35,"label",25),a.Kc(36,"Primer apellido"),a.Sb(),a.Ob(37,"input",26),a.Ic(38,D,4,0,"small",22),a.Sb(),a.Tb(39,"div",19),a.Tb(40,"label",27),a.Kc(41,"Segundo apellido"),a.Sb(),a.Ob(42,"input",28),a.Ic(43,M,4,0,"small",22),a.Sb(),a.Tb(44,"div",29),a.Tb(45,"label",30),a.Kc(46,"Fecha de nacimiento"),a.Sb(),a.Ob(47,"p-calendar",31),a.Ic(48,W,4,0,"small",22),a.Sb(),a.Tb(49,"div",32),a.Tb(50,"label",33),a.Kc(51,"N\xfamero de celular"),a.Sb(),a.Ob(52,"p-inputMask",34),a.Ic(53,q,4,0,"small",22),a.Sb(),a.Tb(54,"div",29),a.Tb(55,"label",35),a.Kc(56,"Email"),a.Sb(),a.Ob(57,"input",36),a.Ic(58,z,4,0,"small",22),a.Sb(),a.Tb(59,"div",32),a.Tb(60,"label",37),a.Kc(61,"Dni"),a.Sb(),a.Ob(62,"p-inputMask",38),a.Ic(63,V,4,0,"small",22),a.Sb(),a.Tb(64,"div",32),a.Tb(65,"label",39),a.Kc(66),a.Sb(),a.Ob(67,"p-dropdown",40),a.Sb(),a.Tb(68,"div",29),a.Tb(69,"label",41),a.Kc(70,"Nombre de contacto"),a.Sb(),a.Ob(71,"input",42),a.Ic(72,j,4,0,"small",22),a.Sb(),a.Tb(73,"div",43),a.Ob(74,"button",44),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Sb()),2&e&&(a.lc("ngIf",t.innerWidth>767),a.Bb(2),a.Gc(t.innerWidth>767?a.pc(30,P):a.pc(31,G)),a.lc("baseZIndex",1e4),a.Bb(14),a.lc("ngIf",t.user.photo_path),a.Bb(1),a.lc("ngIf",!t.user.photo_path),a.Bb(1),a.lc("model",t.items),a.Bb(5),a.lc("formGroup",t.userForm),a.Bb(5),a.lc("ngIf",t.isFieldValid("first_name")),a.Bb(5),a.lc("ngIf",t.isFieldValid("second_name")),a.Bb(5),a.lc("ngIf",t.isFieldValid("first_surname")),a.Bb(5),a.lc("ngIf",t.isFieldValid("second_surname")),a.Bb(4),a.lc("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.min_year+":"+t.max_year)("maxDate",t.max_date),a.Bb(1),a.lc("ngIf",t.isFieldValid("birthdate")),a.Bb(4),a.lc("unmask",!0)("autoClear",!1),a.Bb(1),a.lc("ngIf",t.isFieldValid("phone_number")),a.Bb(5),a.lc("ngIf",t.isFieldValid("email")),a.Bb(4),a.lc("unmask",!0)("autoClear",!1),a.Bb(1),a.lc("ngIf",t.isFieldValid("dni")),a.Bb(3),a.Lc(t.isRoleAdmin?"Rol":"Cargo"),a.Bb(1),a.mc("placeholder",t.isRoleAdmin?"Administrador":null==t.user.occupation?null:t.user.occupation.name),a.lc("optionDisabled","inactive")("disabled",!0),a.Bb(5),a.lc("ngIf",t.isFieldValid("contact_name")))},directives:[i.l,y.a,T.a,_.a,f.q,f.j,f.e,f.b,I.a,f.i,f.d,C.a,x.a,B.a,k.b,F.a],styles:[""]}),e})();var H=r("tk/3");let J=(()=>{class e{constructor(e){this.httpClient=e}resetPass(e){return this.httpClient.patch(`${n.a.urlBase}/api/users/resetPassword`,e)}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(H.b))},e.\u0275prov=a.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Z=function(){return["Configuraci\xf3n","Seguridad"]};function X(e,t){1&e&&a.Ob(0,"app-mini-menu",18),2&e&&a.lc("options",a.pc(2,Z))("icon","settings")}function Q(e,t){1&e&&(a.Tb(0,"small",19),a.Tb(1,"span"),a.Kc(2," Campo requerido. "),a.Sb(),a.Kc(3,"\xa0 "),a.Sb())}function Y(e,t){1&e&&(a.Tb(0,"small",19),a.Tb(1,"span"),a.Kc(2," Longitud [6-12] caracteres. "),a.Sb(),a.Kc(3,"\xa0 "),a.Sb())}function ee(e,t){1&e&&(a.Tb(0,"small",19),a.Tb(1,"span"),a.Kc(2," No coincide con la contrase\xf1a nueva."),a.Sb(),a.Kc(3,"\xa0 "),a.Sb())}let te=(()=>{class e{constructor(e,t,r){this.fb=e,this.messageService=t,this.settingsService=r,this.passError=!1,this.passForm=this.fb.group({password:[,[f.p.required,f.p.pattern(/^(\s+\S+\s*)*(?!\s).*$/)]],new_password:[,[f.p.required,f.p.minLength(6),f.p.maxLength(12),f.p.pattern(/^(\s+\S+\s*)*(?!\s).*$/)]],new_password2:[,[f.p.required,f.p.pattern(/^(\s+\S+\s*)*(?!\s).*$/)]]})}onResize(e){this.innerWidth=window.innerWidth}ngOnInit(){this.innerWidth=window.innerWidth,this.passForm.reset({password:"",new_password:"",new_password2:""})}isFieldValid(e){return this.passForm.controls[e].errors&&this.passForm.controls[e].touched}submit(){this.passForm.invalid?this.passForm.markAllAsTouched():this.passForm.value.new_password===this.passForm.value.new_password2?(this.passError=!1,this.settingsService.resetPass({password:this.passForm.value.password,new_password:this.passForm.value.new_password}).subscribe(e=>{var t,r,i,s;200==e.code?(this.passForm.reset({password:"",new_password:"",new_password2:""}),this.messageService.add({key:"tc",severity:"success",summary:"\xc9xito",detail:"Nueva contrase\xf1a establecida correctamente"})):404==e.code?this.messageService.add({key:"tc",severity:"error",detail:"La contrase\xf1a actual es incorrecta"}):void 0!==(null===(t=e.errors)||void 0===t?void 0:t.password)?this.showError(null===(r=e.errors.password)||void 0===r?void 0:r.msg):void 0!==(null===(i=e.errors)||void 0===i?void 0:i.new_password)&&this.showError(null===(s=e.errors.new_password)||void 0===s?void 0:s.msg)},e=>{this.messageService.add({key:"tc",severity:"error",summary:"Error",detail:"Cont\xe1ctese con el administrador"})})):this.passError=!0}showError(e,t="Registro  Incorrecto"){this.messageService.add({key:"tc",severity:"error",summary:t,detail:e})}}return e.\u0275fac=function(t){return new(t||e)(a.Nb(f.c),a.Nb(h.g),a.Nb(J))},e.\u0275cmp=a.Hb({type:e,selectors:[["app-security"]],hostBindings:function(e,t){1&e&&a.ac("resize",function(e){return t.onResize(e)},!1,a.Bc)},features:[a.Ab([h.g])],decls:33,vars:5,consts:[["class","miniMenu",3,"options","icon",4,"ngIf"],["position","top-center","key","tc"],[1,"card","myCard","myBg","p-mt-2"],[1,"p-text-left","myTitle"],[1,"pi","pi-lock",2,"font-size","1.5rem"],[1,"text-color"],[1,"p-fluid",3,"formGroup","ngSubmit"],[1,"p-field","p-grid"],["for","password",1,"text-color","p-col-12","p-mb-2","p-md-3","p-mb-md-0"],[1,"p-col-12","p-md-9"],["id","password","type","password","pInputText","","formControlName","password","autocomplete","off"],["class","p-error",4,"ngIf"],["for","new_password",1,"text-color","p-col-12","p-mb-2","p-md-3","p-mb-md-0"],["id","new_password","type","password","pInputText","","formControlName","new_password","autocomplete","off"],["for","new_password2",1,"text-color","p-col-12","p-mb-2","p-md-3","p-mb-md-0"],["id","new_password2","type","password","pInputText","","formControlName","new_password2","autocomplete","off"],["for","submit",1,"text-color","p-col-12","p-mb-2","p-md-3","p-mb-md-0"],["type","submit","pButton","","label","Cambiar contrase\xf1a","icon","pi pi-refresh",1,"myBtnInput"],[1,"miniMenu",3,"options","icon"],[1,"p-error"]],template:function(e,t){1&e&&(a.Ic(0,X,1,3,"app-mini-menu",0),a.Ob(1,"p-toast",1),a.Tb(2,"div",2),a.Tb(3,"div",3),a.Kc(4,"Seguridad \xa0"),a.Ob(5,"i",4),a.Sb(),a.Tb(6,"h3",5),a.Kc(7,"Establece una contrase\xf1a nueva"),a.Sb(),a.Ob(8,"br"),a.Tb(9,"form",6),a.ac("ngSubmit",function(){return t.submit()}),a.Tb(10,"div",7),a.Tb(11,"label",8),a.Kc(12,"Contrase\xf1a actual"),a.Sb(),a.Tb(13,"div",9),a.Ob(14,"input",10),a.Ic(15,Q,4,0,"small",11),a.Sb(),a.Sb(),a.Tb(16,"div",7),a.Tb(17,"label",12),a.Kc(18,"Contrase\xf1a nueva"),a.Sb(),a.Tb(19,"div",9),a.Ob(20,"input",13),a.Ic(21,Y,4,0,"small",11),a.Sb(),a.Sb(),a.Tb(22,"div",7),a.Tb(23,"label",14),a.Kc(24,"Repetir contrase\xf1a nueva"),a.Sb(),a.Tb(25,"div",9),a.Ob(26,"input",15),a.Ic(27,ee,4,0,"small",11),a.Sb(),a.Sb(),a.Tb(28,"div",7),a.Tb(29,"label",16),a.Kc(30," \xa0 "),a.Sb(),a.Tb(31,"div",9),a.Ob(32,"button",17),a.Sb(),a.Sb(),a.Sb(),a.Sb()),2&e&&(a.lc("ngIf",t.innerWidth>767),a.Bb(9),a.lc("formGroup",t.passForm),a.Bb(6),a.lc("ngIf",t.isFieldValid("password")),a.Bb(6),a.lc("ngIf",t.isFieldValid("new_password")),a.Bb(6),a.lc("ngIf",t.isFieldValid("new_password2")||t.passError))},directives:[i.l,y.a,f.q,f.j,f.e,f.b,I.a,f.i,f.d,k.b,F.a],styles:[""]}),e})();var re=r("ETNk");const ie=function(){return["Configuraci\xf3n","Apariencia"]};function se(e,t){1&e&&a.Ob(0,"app-mini-menu",14),2&e&&a.lc("options",a.pc(2,ie))("icon","settings")}let ne=(()=>{class e{constructor(e){this.themeService=e}onResize(e){this.innerWidth=window.innerWidth}ngOnInit(){this.innerWidth=window.innerWidth,this.theme=this.themeService.getTheme()}switchTheme(e){this.theme=e,this.themeService.switchTheme(e)}}return e.\u0275fac=function(t){return new(t||e)(a.Nb(re.a))},e.\u0275cmp=a.Hb({type:e,selectors:[["app-appearance"]],hostBindings:function(e,t){1&e&&a.ac("resize",function(e){return t.onResize(e)},!1,a.Bc)},decls:23,vars:10,consts:[["class","miniMenu",3,"options","icon",4,"ngIf"],[1,"card","myCard","myBg","p-mt-2"],[1,"p-text-left","myTitle"],[1,"pi","pi-moon",2,"font-size","1.5rem"],[1,"text-color"],[1,"p-grid","p-formgrid","p-fluid","p-mt-4"],[1,"p-field","p-col-12","p-md-4",2,"padding","1rem","margin","0"],[1,"card","myCard","myBgVela","p-grid",3,"click"],[1,"text-Vela","p-col-4"],["pButton","","pRipple","","type","button","icon","pi pi-check",1,"p-button-rounded","p-col-8"],[1,"card","myCard","myBgLight","p-grid",3,"click"],[1,"text-Light","p-col-4"],[1,"card","myCard","myBgDark","p-grid",3,"click"],[1,"text-Dark","p-col-4"],[1,"miniMenu",3,"options","icon"]],template:function(e,t){1&e&&(a.Ic(0,se,1,3,"app-mini-menu",0),a.Tb(1,"div",1),a.Tb(2,"div",2),a.Kc(3,"Apariencia \xa0"),a.Ob(4,"i",3),a.Sb(),a.Tb(5,"h3",4),a.Kc(6,"Seleciona una tema para la aplicaci\xf3n "),a.Sb(),a.Tb(7,"div",5),a.Tb(8,"div",6),a.Tb(9,"div",7),a.ac("click",function(){return t.switchTheme("theme-vela-blue")}),a.Tb(10,"h4",8),a.Kc(11),a.Sb(),a.Ob(12,"button",9),a.Sb(),a.Sb(),a.Tb(13,"div",6),a.Tb(14,"div",10),a.ac("click",function(){return t.switchTheme("theme-mdc-light-indigo")}),a.Tb(15,"h4",11),a.Kc(16),a.Sb(),a.Ob(17,"button",9),a.Sb(),a.Sb(),a.Tb(18,"div",6),a.Tb(19,"div",12),a.ac("click",function(){return t.switchTheme("theme-mdc-dark-indigo")}),a.Tb(20,"h4",13),a.Kc(21),a.Sb(),a.Ob(22,"button",9),a.Sb(),a.Sb(),a.Sb(),a.Sb()),2&e&&(a.lc("ngIf",t.innerWidth>767),a.Bb(11),a.Mc(" ",t.innerWidth>1026?"Vela":""," "),a.Bb(1),a.Db("theme-vela-blue"===t.theme?"":"p-button-outlined"),a.Bb(4),a.Mc(" ",t.innerWidth>1026?"Ligero":"",""),a.Bb(1),a.Db("theme-mdc-light-indigo"===t.theme?"":"p-button-outlined"),a.Bb(4),a.Mc(" ",t.innerWidth>1026?"Oscuro":"",""),a.Bb(1),a.Db("theme-mdc-dark-indigo"===t.theme?"":"p-button-outlined"))},directives:[i.l,k.b,F.a],styles:[""]}),e})();var ae=r("dgEK"),oe=r("zUwj");const ce=[{path:"",children:[{path:"",component:p,children:[{path:"account",component:$,canLoad:[ae.a],canActivate:[ae.a],data:{USER_ROLES:[S.a.USER,S.a.USER_ADMIN],MODULE:oe.a.SETTINGS}},{path:"security",component:te,canLoad:[ae.a],canActivate:[ae.a],data:{USER_ROLES:[S.a.USER,S.a.USER_ADMIN],MODULE:oe.a.SETTINGS}},{path:"appearance",component:ne,canLoad:[ae.a],canActivate:[ae.a],data:{USER_ROLES:[S.a.USER,S.a.USER_ADMIN],MODULE:oe.a.SETTINGS}},{path:"**",redirectTo:"appearance"}]},{path:"**",redirectTo:"appearance"}]}];let le=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.Lb({type:e}),e.\u0275inj=a.Kb({imports:[[s.f.forChild(ce)],s.f]}),e})();var de=r("V/fk"),ue=r("uPqY");let me=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.Lb({type:e}),e.\u0275inj=a.Kb({imports:[[i.c,le,ue.a,de.a,f.o]]}),e})()}}]);